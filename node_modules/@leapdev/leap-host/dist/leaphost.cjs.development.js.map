{"version":3,"file":"leaphost.cjs.development.js","sources":["../src/api/index.ts","../src/impl/config.ts","../src/impl/util.ts","../src/impl/base-impl.ts","../src/impl/desktop/accounting.ts","../src/impl/desktop/app.ts","../src/impl/desktop/calc.ts","../src/impl/desktop/communication.ts","../src/impl/desktop/document.ts","../src/impl/desktop/infotrack.ts","../src/impl/desktop/lawconnect.ts","../src/impl/desktop/matter.ts","../src/impl/desktop/msteams.ts","../src/impl/desktop/register.ts","../src/impl/desktop/schema.ts","../src/impl/desktop/system.ts","../src/impl/desktop/card.ts","../src/impl/desktop/staff.ts","../src/impl/desktop/person.ts","../src/impl/desktop/index.ts","../src/impl/web/config/whitelistdomain.ts","../src/impl/web/accounting.ts","../src/impl/web/app.ts","../src/impl/web/calc.ts","../src/impl/web/communication.ts","../src/impl/web/document.ts","../src/impl/web/infotrack.ts","../src/impl/web/lawconnect.ts","../src/impl/web/matter.ts","../src/impl/web/msteams.ts","../src/impl/web/card.ts","../src/impl/web/staff.ts","../src/impl/web/register.ts","../src/impl/web/schema.ts","../src/impl/web/system.ts","../src/impl/web/person.ts","../src/impl/web/index.ts","../src/impl/index.ts"],"sourcesContent":["import { calc } from './calc';\nimport { card } from '././card';\nimport { communication } from './communication';\nimport { document } from './document';\nimport { lawconnect } from './lawconnect';\nimport { matter } from './matter';\nimport { msteams } from './msteams';\nimport { system } from './system';\nimport { app } from './app';\nimport { infotrack } from './infotrack';\nimport { accounting } from './accounting';\nimport { person } from './person';\nimport { register } from './register';\nimport { schema } from './schema';\nimport { staff } from './staff';\nimport { UserInfo } from '@leapdev/auth-agent/src/lib/types';\n\nexport interface BaseRequest {\n  appSessionId?: string;\n  close?: boolean;\n}\n\nexport interface MatterBasedRequest extends BaseRequest {\n  matterId: string;\n}\n\nexport interface HostResponse {\n  isSuccess: boolean;\n  error: string;\n  data: any;\n}\n\nexport type MatterContext = {\n  matterId: string;\n  [key: string]: any;\n};\n\nexport type CardContext = {\n  cardId: string;\n  [key: string]: any;\n};\n\nexport type PersonContext = {\n  personId: string;\n  [key: string]: any;\n};\n\nexport interface RequestContext {\n  appSessionId: string; // leap-app session id - used for validation and host resource mapping\n  host: string; // web, reporting, android, apple (4D by default)\n  env: string; // dev, test, live\n  region: string; // au, us, uk\n  trustedApp?: boolean; // true for internal trusted applications\n  newTab?: boolean; // true for opening on new tab\n}\n\nexport class LeapContext {\n  constructor(readonly context: MatterContext | CardContext | PersonContext, readonly hostInfo: HostInfo) {}\n}\n\nexport class HostInfo {\n  constructor(\n    readonly appSessionId: string,\n    readonly hostType: string,\n    readonly hostVersion: string,\n    readonly env: string,\n    readonly region: string\n  ) {}\n}\n\nexport interface Api {\n  accounting: accounting.Api;\n  app: app.Api;\n  calc: calc.Api;\n  communication: communication.Api;\n  document: document.Api;\n  infotrack: infotrack.Api;\n  lawconnect: lawconnect.Api;\n  matter: matter.Api;\n  msteams: msteams.Api;\n  person: person.Api;\n  register: register.Api;\n  schema: schema.Api;\n  system: system.Api;\n  card: card.Api;\n  staff: staff.Api;\n\n  leapContext: LeapContext;\n\n  init(leapAuthClientId?: string): Promise<void>;\n  getRefreshedAccessToken(): Promise<string>;\n  getDecodedRefreshedAccessToken(): Promise<any>;\n  getUserInfo(): Promise<UserInfo>;\n  registerHostMessageHandler(command: string, callback?: (param?: any) => void): void;\n  deregisterHostMessageHandler(command: string): void;\n}\n","let config = {\n  auth: {\n    host: {\n      dev: {\n        au: 'https://auth.dev.leap.services',\n      },\n      test: {\n        au: 'https://login.test.leap365.com.au',\n        uk: 'https://login.test.leap365.co.uk',\n        us: 'https://login.test.leap365.com',\n        ca: 'https://login.test.leap365.ca',\n      },\n      live: {\n        au: 'https://login.leap365.com.au',\n        uk: 'https://login.leap365.co.uk',\n        us: 'https://login.leap365.com',\n        ca: 'https://login.leap365.ca',\n      },\n    },\n  },\n};\n\nexport { config };\n","/**\n * Returns the value of a query string paramter of the current url if exists, undefined otherwise.\n * @param key The name of the parameter\n * @returns The value or undefined\n */\nexport function getQueryStringValue(key: string, searchInHash: boolean = false): string {\n  let result = undefined;\n  const locationSection = searchInHash ? window.location.hash : window.location.search;\n\n  if (locationSection && locationSection.length > 1) {\n    const keyValues = locationSection.substring(1).split('&');\n    let i = 0;\n    while (result === undefined && i < keyValues.length) {\n      let split = keyValues[i].split('=');\n      if (split.length === 2 && split[0] === key) result = split[1];\n      i++;\n    }\n  }\n\n  return result;\n}\n\nexport function addMinutes(date, minutes) {\n  return new Date(date.getTime() + minutes * 60000);\n}\n\n/**\n * Decodes a JWT token\n * @param token The JWT token\n * @returns The decoded token\n */\nexport function decodeToken(token: string): any {\n  if (!token) return undefined;\n  try {\n    const payload = token.split('.')[1];\n    return JSON.parse(atob(payload));\n  } catch (e) {\n    return undefined;\n  }\n}\n","import {\n  Api,\n  LeapContext,\n  HostResponse,\n  RequestContext,\n  MatterContext,\n  HostInfo,\n  CardContext,\n  PersonContext,\n} from '../api';\nimport { app } from '../api/app';\nimport { calc } from '../api/calc';\nimport { communication } from '../api/communication';\nimport { document } from '../api/document';\nimport { infotrack } from '../api/infotrack';\nimport { lawconnect } from '../api/lawconnect';\nimport { matter } from '../api/matter';\nimport { msteams } from '../api/msteams';\nimport { system } from '../api/system';\nimport { accounting } from '../api/accounting';\nimport { register } from '../api/register';\nimport { schema } from '../api/schema';\nimport { v4 as uuidv4 } from 'uuid';\nimport { config } from './config';\nimport { card } from 'api/card';\nimport { staff } from 'api/staff';\nimport { person } from 'api/person';\nimport { AuthAgent } from '@leapdev/auth-agent/src/index.umd';\nimport { decodeToken, getQueryStringValue } from './util';\nimport { UserInfo } from '@leapdev/auth-agent/src/lib/types';\n\nexport abstract class BaseApi implements Api {\n  abstract get accounting(): accounting.Api;\n  abstract get app(): app.Api;\n  abstract get calc(): calc.Api;\n  abstract get card(): card.Api;\n  abstract get communication(): communication.Api;\n  abstract get document(): document.Api;\n  abstract get infotrack(): infotrack.Api;\n  abstract get lawconnect(): lawconnect.Api;\n  abstract get staff(): staff.Api;\n  abstract get msteams(): msteams.Api;\n  abstract get person(): person.Api;\n  abstract get register(): register.Api;\n  abstract get schema(): schema.Api;\n  abstract get matter(): matter.Api;\n  abstract get system(): system.Api;\n\n  protected _leapContext: LeapContext;\n  protected _isTrustedApp: boolean;\n\n  private registeredCommands: { [command: string]: (params?: any) => void };\n  private _userToken: string; //TODO: remove when LD2.4 is the minimum version\n\n  constructor(requestContext: RequestContext) {\n    this.registeredCommands = {};\n\n    const hostInfo = new HostInfo(\n      requestContext.appSessionId,\n      requestContext.host,\n      null,\n      requestContext.env,\n      requestContext.region\n    );\n    this._leapContext = new LeapContext(undefined, hostInfo);\n    this._isTrustedApp = !!requestContext.trustedApp;\n  }\n\n  get leapContext(): LeapContext {\n    return this._leapContext;\n  }\n\n  public get isTrustedApp(): boolean {\n    return this._isTrustedApp;\n  }\n\n  public init(leapAuthClientId?: string): Promise<void> {\n    //close the window if the user doesn't accept the permissions\n    const errMsg = getQueryStringValue('error');\n    if (errMsg === 'access_denied') this.system.close();\n\n    return new Promise((resolve, reject) => {\n      this.registerHostMessageHandler(\n        this.leapContext.hostInfo.appSessionId,\n        ({ data: leapContext }: leapContextResponse) => {\n          this.deregisterHostMessageHandler(this.leapContext.hostInfo.appSessionId);\n          const leapContextObj = {\n            context: leapContext.context,\n            hostInfo: this.leapContext.hostInfo,\n          };\n\n          if (!leapContext.context || (Object.keys(leapContext.context).length === 0 && !!leapContext.matterContext)) {\n            leapContextObj.context = leapContext.matterContext;\n          }\n\n          let clientId = leapAuthClientId;\n\n          //host info, available from LD2.4\n          if (!!leapContext.hostInfo) {\n            this._isTrustedApp = leapContext.isTrustedApp;\n\n            leapContextObj.hostInfo = new HostInfo(\n              this.leapContext.hostInfo.appSessionId,\n              leapContext.hostInfo.hostType,\n              leapContext.hostInfo.hostVersion,\n              leapContext.hostInfo.env,\n              leapContext.hostInfo.region\n            );\n\n            if (!this.isTrustedApp) {\n              //use clientId from the schema for non-trusted apps\n              if (!!leapContext.clientId) {\n                clientId = leapContext.clientId;\n              } else {\n                return reject('Failed to load the clientId from the schema');\n              }\n            } else {\n              //trusted apps don't need clientId\n              this._leapContext = new LeapContext(leapContextObj.context, leapContextObj.hostInfo);\n              this.hostRelatedSetup();\n              return resolve();\n            }\n          } else {\n            if (this.isTrustedApp) {\n              //TODO: remove when 2.4 is the minimum version\n              this._userToken = leapContext.authtoken;\n              this._leapContext = new LeapContext(leapContextObj.context, leapContextObj.hostInfo);\n              this.hostRelatedSetup();\n              return resolve();\n            }\n          }\n\n          this._leapContext = new LeapContext(leapContextObj.context, leapContextObj.hostInfo);\n          this.hostRelatedSetup();\n\n          const authEnv = leapContextObj.hostInfo.env.includes('live') ? 'live' : leapContextObj.hostInfo.env;\n          const authHost = config.auth.host[authEnv][leapContextObj.hostInfo.region];\n\n          AuthAgent.init({\n            authHost: authHost,\n            clientId: clientId,\n            autoLogin: true,\n            autoLogout: false,\n            uniqueSession: false,\n            scopes: ['*'], //AUTH-218, defaults to defaultScopes for marketplace apps\n            autoRefreshToken: false,\n          }).then((accessToken: string) => {\n            return resolve();\n          });\n        }\n      );\n      this.retrieveContext();\n    });\n  }\n\n  public async getRefreshedAccessToken(): Promise<string> {\n    if (this.isTrustedApp) {\n      if (!!this.leapContext.hostInfo.hostVersion) {\n        //fall back to the default userToken if this command has not been implemented yet\n        return this.system.send({ command: 'internal.getAccessToken' }, true) ?? this._userToken;\n      } else {\n        //TODO: remove when LD2.4 is the minimum version\n        //only LD2.3 does not have the value for \"hostVersion\"\n        return this._userToken;\n      }\n    }\n    return AuthAgent.getRefreshedAccessToken();\n  }\n\n  public async getDecodedRefreshedAccessToken(): Promise<any> {\n    const accessToken = await this.getRefreshedAccessToken();\n    return decodeToken(accessToken);\n  }\n\n  public async getUserInfo(): Promise<UserInfo> {\n    return AuthAgent.userInfo();\n  }\n\n  protected abstract retrieveContext(): void;\n  protected abstract hostRelatedSetup(): void;\n\n  public registerHostMessageHandler(command: string, callback?: (param?: any) => void) {\n    const alreadyRegistered = !!this.registeredCommands[command];\n\n    if (!alreadyRegistered) {\n      this.registeredCommands[command] = callback;\n    } else {\n      throw new Error('Command already registered');\n    }\n  }\n\n  public deregisterHostMessageHandler(command: string) {\n    delete this.registeredCommands[command];\n  }\n\n  /**\n   * A helper function that makes 2-way call easier. It takes care of registering and deregistering message handler for you.\n   * @param request the actual request object from LEAP app\n   * @param requestFn a function specifying how a request object should be sent to the host system. It passes the requestId as parameter so that the request function can attach it to the request object.\n   * @param responseFn a function specifying how a raw response from the host system should be handled / transformed\n   * @return a promise of the final response\n   */\n  public twoWayCall<I, O>(\n    request: I,\n    requestFn: (requestId: string, request: I) => void,\n    responseFn: (response: any) => O\n  ): Promise<O> {\n    const requestId = uuidv4();\n    return new Promise((resolve, reject) => {\n      this.registerHostMessageHandler(requestId, (hostResponse: HostResponse) => {\n        this.deregisterHostMessageHandler(requestId);\n        if (hostResponse.isSuccess) {\n          resolve(responseFn(hostResponse.data));\n        } else {\n          reject(new Error(hostResponse.error));\n        }\n      });\n      requestFn(requestId, request);\n    });\n  }\n\n  protected handleCommand(command: string, payload?: string) {\n    const registeredCommand = this.registeredCommands[command];\n\n    if (!!registeredCommand && !!payload) {\n      const params = JSON.parse(payload);\n      registeredCommand(params);\n    } else if (!!registeredCommand) {\n      registeredCommand();\n    } else {\n      throw new Error('Host command not registered');\n    }\n  }\n}\n\ninterface leapContextResponse {\n  isSuccess: boolean;\n  data: leapContextInternal;\n}\n\ninterface leapContextInternal {\n  authtoken: string; //TODO: remove when 2.4 is the minimum version\n  isTrustedApp: boolean;\n  clientId: string;\n  apiKey: string;\n  context: any;\n  matterContext: any; //deprecated, leave here for backwards compatible\n  hostInfo: HostInfo;\n}\n","import { accounting } from '../../api/accounting';\nimport { BrowserFourdApi } from '.';\nimport { MatterBasedRequest } from '../../api/.';\n\nexport class Accounting implements accounting.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  createTimeEntry(request: accounting.CreateTimeEntryRequest): void {\n    this.fourd.call4Dv2('accounting.createTimeEntry', request);\n  }\n\n  createFeeEntry(request: accounting.CreateFeeEntryRequest): void {\n    this.fourd.call4Dv2('accounting.createFeeEntry', request);\n  }\n\n  createCostRecovery(request: accounting.CreateCostRecoveryEntryRequest): void {\n    this.fourd.call4Dv2('accounting.createCostRecovery', request);\n  }\n\n  createInvoice(request: accounting.CreateInvoiceRequest): Promise<boolean> {\n    return this.fourd.twoWayCall<accounting.CreateInvoiceRequest, boolean>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('accounting.createInvoice', request, requestId);\n      },\n      (response) => {\n        return true; // TODO: check the actual response\n      }\n    );\n  }\n\n  createOfficeReceipt(request: accounting.CreateOfficeReceiptRequest): void {\n    this.fourd.call4Dv2('accounting.createOfficeReceipt', request);\n  }\n\n  createOfficePayment(request: accounting.CreateOfficePaymentRequest): void {\n    this.fourd.call4Dv2('accounting.createOfficePayment', request);\n  }\n\n  createOfficeJournal(request: accounting.CreateOfficeJournalRequest): void {\n    this.fourd.call4Dv2('accounting.createOfficeJournal', request);\n  }\n\n  createTrustReceipt(request: accounting.CreateTrustReceiptRequest): void {\n    this.fourd.call4Dv2('accounting.createTrustReceipt', request);\n  }\n\n  createTrustPayment(request: accounting.CreateTrustPaymentRequest): void {\n    this.fourd.call4Dv2('accounting.createTrustPayment', request);\n  }\n\n  createTrustJournal(request: accounting.CreateTrustJournalRequest): void {\n    this.fourd.call4Dv2('accounting.createTrustJournal', request);\n  }\n\n  createTrustToOffice(request: accounting.CreateTrustToOfficeRequest): void {\n    this.fourd.call4Dv2('accounting.createTrustToOffice', request);\n  }\n  createOfficePaymentRequest(request: accounting.CreateNewOfficePaymentRequestRequest): void {\n    this.fourd.call4Dv2('accounting.createOfficePaymentRequest', request);\n  }\n\n  createTrustPaymentRequest(request: accounting.CreateNewTrustPaymentRequestRequest): void {\n    this.fourd.call4Dv2('accounting.createTrustPaymentRequest', request);\n  }\n\n  reloadFinancialSummary(request: accounting.ReloadFinancialSummaryRequest): void {\n    this.fourd.call4Dv2('accounting.reloadFinancialSummary', request);\n  }\n\n  reloadTimeFeeList(request: accounting.ReloadTimeFeeListRequest): void {\n    this.fourd.call4Dv2('accounting.reloadTimeFeeList', request);\n  }\n\n  reloadOfficeLedger(request: accounting.ReloadOfficeLedgerRequest): void {\n    this.fourd.call4Dv2('accounting.reloadOfficeLedger', request);\n  }\n\n  reloadAnticipatedPaymentList(request: accounting.ReloadAnticipatedPaymentListRequest): void {\n    this.fourd.call4Dv2('accounting.reloadAnticipatedPaymentList', request);\n  }\n\n  reloadCostRecoveryList(request: accounting.ReloadCostRecoveryListRequest): void {\n    this.fourd.call4Dv2('accounting.reloadCostRecoveryList', request);\n  }\n\n  reloadTrustLedger(request: accounting.ReloadTrustLedgerRequest): void {\n    this.fourd.call4Dv2('accounting.reloadTrustLedger', request);\n  }\n\n  reloadControlledMoneyList(request: accounting.ReloadControlledMoneyListRequest): void {\n    this.fourd.call4Dv2('accounting.reloadControlledMoneyList', request);\n  }\n\n  reloadPowerMoneyList(request: accounting.ReloadPowerMoneyListRequest): void {\n    this.fourd.call4Dv2('accounting.reloadPowerMoneyList', request);\n  }\n\n  reloadTransitMoneyList(request: accounting.ReloadTransitMoneyListRequest): void {\n    this.fourd.call4Dv2('accounting.reloadTransitMoneyList', request);\n  }\n\n  openFee(request: accounting.OpenFeeRequest): void {\n    if (request.isAutoTime) request.timed = true;\n\n    this.fourd.call4Dv2('accounting.openFee', request);\n  }\n}\n","import { app } from '../../api/app';\nimport { BrowserFourdApi } from '.';\n\nexport class App implements app.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  openApp(request: app.OpenAppRequest): void {\n    this.fourd.call4Dv2('app.openApp', request);\n  }\n}\n","import { calc } from '../../api/calc';\nimport { BrowserFourdApi } from './index';\n\nexport class Calc implements calc.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  evaluatePaths(request: calc.EvaluatePathsRequest): Promise<calc.PathResult[]> {\n    return this.fourd.twoWayCall<calc.EvaluatePathsRequest, calc.PathResult[]>(\n      request,\n      (requestId, request) => {\n        const calcRequest = {\n          method: 'POST',\n          url: '/api/evaluate/paths',\n          body: request,\n        };\n        this.fourd.call4Dv2('calc.evaluatePaths', calcRequest, requestId);\n      },\n      (response) => {\n        if (response.status >= 400) {\n          throw new Error(JSON.parse(response.body).message);\n        } else {\n          let responseData;\n          try {\n            responseData = JSON.parse(response.body);\n          } catch (e) {\n            // Unable to parse response.body => response.body is not a stringify object\n            responseData = response.body;\n          }\n          return responseData;\n        }\n      }\n    );\n  }\n}\n","import { communication } from '../../api/communication';\nimport { BrowserFourdApi } from '.';\n\nexport class Communication implements communication.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  composeEmail(request: communication.CreateEmailRequest): void {\n    this.fourd.call4Dv2('communication.composeEmail', request);\n  }\n\n  createAppointment(request: communication.CreateAppointmentRequest): void {\n    this.fourd.call4Dv2('communication.createAppointment', request);\n  }\n\n  createTask(request: communication.CreateTaskRequest): void {\n    this.fourd.call4Dv2('communication.createTask', request);\n  }\n}\n","import { document } from '../../api/document';\nimport { BrowserFourdApi } from '.';\n\nexport class Document implements document.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  previewDocument(request: document.PreviewDocumentRequest): void {\n    this.fourd.call4Dv2('document.previewDocument', request);\n  }\n\n  previewPrecedent(request: document.PreviewPrecedentRequest): void {\n    this.fourd.call4Dv2('document.previewPrecedent', request);\n  }\n\n  createDocumentFromContainer(request: document.CreateDocumentFromContainerRequest): void {\n    this.fourd.call4Dv2('document.createDocumentFromContainer', request);\n  }\n\n  createDocumentFromPrecedent(request: document.CreateDocumentFromPrecedentRequest): void {\n    this.fourd.call4Dv2('document.createDocumentFromPrecedent', request);\n  }\n\n  openDocument(request: document.OpenDocumentRequest): void {\n    this.fourd.call4Dv2('document.openDocument', request);\n  }\n\n  reloadDocumentList(request: document.ReloadDocumentListRequest): void {\n    this.fourd.call4Dv2('document.reloadDocumentList', request);\n  }\n\n  editPrecedent(request: document.EditPrecedentRequest): void {\n    this.fourd.call4Dv2('document.editPrecedent', request);\n  }\n\n  selectPrecedent(request: document.SelectPrecedentRequest): Promise<document.SelectPrecedentResponse> {\n    return this.fourd.twoWayCall<document.SelectPrecedentRequest, document.SelectPrecedentResponse>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('document.selectPrecedent', request, requestId);\n      },\n      (response) => response\n    );\n  }\n}\n","import { infotrack } from '../../api/infotrack';\nimport { BrowserFourdApi } from '.';\n\nexport class Infotrack implements infotrack.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  orderSearch(request: infotrack.CreateSearchRequest): void {\n    this.fourd.call4Dv2('infotrack.orderSearch', request);\n  }\n}\n","import { lawconnect } from '../../api/lawconnect';\nimport { BrowserFourdApi } from '.';\n\nexport class LawConnect implements lawconnect.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  shareDocuments(request: lawconnect.ShareDocumentsRequest): void {\n    this.fourd.call4Dv2('lawconnect.shareDocuments', request);\n  }\n\n  shareFolder(request: lawconnect.ShareFolderRequest): void {\n    this.fourd.call4Dv2('lawconnect.shareFolder', request);\n  }\n\n  shareOfficeStatement(request: lawconnect.ShareOfficeStatementRequest): void {\n    this.fourd.call4Dv2('lawconnect.shareOfficeStatement', request);\n  }\n\n  shareTrustStatement(request: lawconnect.ShareTrustStatementRequest): void {\n    this.fourd.call4Dv2('lawconnect.shareTrustStatement', request);\n  }\n}\n","import { matter } from '../../api/matter';\nimport { BrowserFourdApi } from '.';\nimport { BaseRequest } from 'api';\n\nexport class Matter implements matter.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  openTable(request: matter.OpenTableRequest): void {\n    if (request == null) {\n      request.order = 1;\n    }\n    this.fourd.call4Dv2('matter.openTable', request);\n  }\n\n  openMatter(request: matter.OpenMatterRequest): void {\n    this.fourd.call4Dv2('matter.openMatter', request);\n  }\n\n  selectMatter(request?: matter.SelectMatterRequest): Promise<matter.Matter[]> {\n    return this.fourd.twoWayCall<matter.SelectMatterRequest, matter.Matter[]>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('matter.selectMatter', request, requestId);\n      },\n      (response) => {\n        if (\n          !this.fourd.leapContext?.hostInfo?.hostVersion ||\n          this.fourd.leapContext.hostInfo.hostVersion < '2.4.280.0'\n        ) {\n          //HSDK-122, fix the incorrect property names, can be removed when minimum version is 2.4\n          return response.map((r) => {\n            const matter = { ...r, deleted: r.delete, matterTypeId: '' };\n            delete matter.delete;\n\n            return matter;\n          });\n        }\n\n        return response;\n      }\n    );\n  }\n\n  // getLists(request: BaseRequest): Promise<matter.MatterResult[]> {\n  //   return this.fourd.twoWayCall<BaseRequest, matter.MatterResult[]>(\n  //     request,\n  //     (requestId, request) => {\n  //       this.fourd.call4Dv2('matter.getLists', request, requestId);\n  //     },\n  //     (response) => {\n  //       let responseData;\n  //       try {\n  //         responseData = JSON.parse(response.body);\n  //       } catch (e) {\n  //         // Unable to parse response => response is not a stringify object\n  //         responseData = response;\n  //       }\n  //       return responseData;\n  //     }\n  //   );\n  // }\n}\n","import { msteams } from '../../api/msteams';\nimport { BrowserFourdApi } from '.';\n\nexport class MsTeams implements msteams.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  shareDocument(request: msteams.ShareDocumentRequest): void {\n    this.fourd.call4Dv2('msteams.shareDocument', request);\n  }\n\n  shareMatter(request: msteams.ShareMatterRequest): void {\n    this.fourd.call4Dv2('msteams.shareMatter', request);\n  }\n\n  requestCallback(request: msteams.RequestCallbackRequest): void {\n    this.fourd.call4Dv2('msteams.requestCallback', request);\n  }\n}\n","import { register } from '../../api/register';\nimport { BrowserFourdApi } from '.';\n\nexport class Register implements register.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  reloadDocumentRegisterList(request: register.ReloadDocumentRegisterListRequest): void {\n    this.fourd.call4Dv2('register.reloadDocumentRegisterList', request);\n  }\n  reloadPowerEstateList(request: register.ReloadPowerEstateListRequest): void {\n    this.fourd.call4Dv2('register.reloadPowerEstateList', request);\n  }\n}\n","import { BrowserFourdApi } from '.';\nimport { schema } from '../../api/schema';\n\nexport class Schema implements schema.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  customiseList(request: schema.CustomiseListRequest): Promise<schema.CustomiseListResponse> {\n    return this.fourd.twoWayCall<schema.CustomiseListRequest, schema.CustomiseListResponse>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('schema.customiseList', request, requestId);\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n\n  getLists(request: schema.GetListsRequest): Promise<schema.SchemaResponse<schema.SchemaList[]>> {\n    return this.fourd.twoWayCall<schema.GetListsRequest, schema.SchemaResponse<schema.SchemaList[]>>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('schema.getLists', request, requestId);\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n}\n","import { system } from '../../api/system';\nimport { BrowserFourdApi } from '.';\nimport { BaseRequest } from '../../api';\n\nexport class System implements system.Api {\n  private _systemInfo: system.SystemInfo;\n\n  constructor(private fourd: BrowserFourdApi) {}\n\n  openTwitter(request: BaseRequest): void {\n    this.fourd.call4Dv2('system.openTwitter', request);\n  }\n\n  close(): void {\n    this.fourd.call4Dv2('system.close');\n  }\n\n  hide(): void {\n    this.fourd.call4Dv2('system.hide');\n  }\n\n  wait(request?: system.MessageRequest): void {\n    this.fourd.call4Dv2('system.wait', request);\n  }\n\n  resume(): void {\n    this.fourd.call4Dv2('system.resume');\n  }\n\n  cancelClose(): void {\n    this.fourd.call4Dv2('system.cancelClose');\n  }\n\n  alert(request: system.MessageRequest): void {\n    if (!this.isString(request.message) || !request.message) {\n      return;\n    }\n    this.fourd.call4Dv2('system.alert', request);\n  }\n\n  error(request: system.MessageRequest): void {\n    if (!this.isString(request.message) || !request.message) {\n      return;\n    }\n    this.fourd.call4Dv2('system.error', request);\n  }\n\n  openDialog(request: system.DialogRequest): Promise<boolean> {\n    if (!this.isString(request.message) || !request.message) {\n      throw new Error('Invalid value in message');\n    } else if (!request.dialogType) {\n      throw new Error('DialogType cannot be null');\n    }\n\n    return this.fourd.twoWayCall<system.DialogRequest, boolean>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('system.openDialog', request, requestId);\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n\n  openUrl(config: system.BrowserConfig): void {\n    config['action'] = 'OpenURL';\n    this.fourd.call4Dv2('system.openUrl', config);\n  }\n\n  getSystemInfo(): Promise<system.SystemInfo> {\n    if (this._systemInfo) {\n      return Promise.resolve(this._systemInfo);\n    }\n    return this.fourd.twoWayCall<system.SystemInfo, system.SystemInfo>(\n      null,\n      (requestId, request) => {\n        this.fourd.call4Dv2('system.getSystemInfo', request, requestId);\n      },\n      (response) => {\n        this._systemInfo = response;\n        return response;\n      }\n    );\n  }\n\n  setWindowTitle(request: system.SetWindowTitleRequest) {\n    this.fourd.call4Dv2('system.setWindowTitle', request);\n  }\n\n  onBeforeClose(handler: () => Promise<boolean>): void {\n    handler().then((shouldCancelClose) => {\n      if (shouldCancelClose) {\n        this.cancelClose();\n      }\n    });\n  }\n\n  async send(request: any, hasResponse: boolean = false): Promise<any> {\n    if (!this.fourd.isTrustedApp) {\n      throw new Error('Permission error');\n    }\n\n    if (request === null || request === undefined) {\n      throw new Error('Bad request');\n    }\n\n    const isObject = typeof request === 'object';\n\n    // Proxy generic command use case\n    if (isObject && request['command']) {\n      if (hasResponse) {\n        return this.fourd.twoWayCall<any, any>(\n          request,\n          (requestId, request) => {\n            this.fourd.call4Dv2(request['command'], request['request'], requestId);\n          },\n          (response) => {\n            return response;\n          }\n        );\n      } else {\n        this.fourd.call4Dv2(request['command'], request['request']);\n        return Promise.resolve();\n      }\n    }\n\n    // For strings and SDK 1.0 commands\n    if (hasResponse) {\n      return this.fourd.twoWayCall<any, any>(\n        request,\n        (requestId, request) => {\n          this.fourd.call4Dv2('system.send', request, requestId);\n        },\n        (response) => {\n          return response;\n        }\n      );\n    } else {\n      this.fourd.call4Dv2('system.send', request);\n      return Promise.resolve();\n    }\n  }\n\n  // Legacy versions - Do not wrap request object in v2 format (LSDK-81)\n  private sendLegacy(request: any): Promise<any> {\n    const isObject = typeof request === 'object';\n    if (!isObject || !request['requestId']) {\n      this.fourd.call4D(this.fourd.to4DJSONString(request));\n      return Promise.resolve();\n    } else {\n      return new Promise<any>((resolve, reject) => {\n        this.fourd.registerHostMessageHandler(request['requestId'], (response) => {\n          this.fourd.deregisterHostMessageHandler(request['requestId']);\n          // Some handlers of 2.1 and 2.2 respond in v2 format\n          if (typeof response === 'object' && !!response) {\n            const hasStatus = response.hasOwnProperty('isSuccess');\n            const hasError = response.hasOwnProperty('error');\n            const hasData = response.hasOwnProperty('data');\n            if (hasStatus && (hasError || hasData)) {\n              if (response['isSuccess']) {\n                resolve(response['data']);\n              } else {\n                reject(new Error(response['error']));\n              }\n            }\n          } else {\n            resolve(response);\n          }\n        });\n        this.fourd.call4D(this.fourd.to4DJSONString(request));\n      });\n    }\n  }\n\n  finishLoading(): void {\n    this.fourd.call4Dv2('system.finishLoading');\n  }\n\n  private isString = (value: any) => {\n    return typeof value === 'string' || value instanceof String;\n  };\n}\n","import { card } from '../../api/card';\nimport { BrowserFourdApi } from '.';\nimport { BaseRequest } from 'api';\n\nexport class Card implements card.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  selectCard(request?: card.SelectCardRequest): Promise<card.Card[]> {\n    return this.fourd.twoWayCall<card.SelectCardRequest, card.Card[]>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('card.selectCard', request, requestId);\n      },\n      (response) => {\n        let responseData;\n        try {\n          responseData = JSON.parse(response);\n        } catch (e) {\n          responseData = response;\n        }\n        return responseData;\n      }\n    );\n  }\n\n  createCard(): Promise<card.CreatedCard> {\n    return this.fourd.twoWayCall<any, card.CreatedCard>(\n      null,\n      (requestId, request) => {\n        this.fourd.call4Dv2('card.createCard', request, requestId);\n      },\n      (response) => {\n        let responseData;\n        try {\n          responseData = JSON.parse(response);\n        } catch (e) {\n          responseData = response;\n        }\n        return responseData;\n      }\n    );\n  }\n\n  openCard(request: card.OpenCardRequest): void {\n    this.fourd.call4Dv2('card.openCard', request);\n  }\n\n  //   getLists(request: BaseRequest): Promise<card.Card[]> {\n  //     return this.fourd.twoWayCall<BaseRequest, card.Card[]>(\n  //       request,\n  //       (requestId, request) => {\n  //         this.fourd.call4Dv2('card.getLists', request, requestId);\n  //       },\n  //       (response) => {\n  //         let responseData;\n  //         try {\n  //           responseData = JSON.parse(response);\n  //         } catch (e) {\n  //           // Unable to parse response.body => response.body is not a stringify object\n  //           responseData = response;\n  //         }\n  //         return responseData;\n  //       }\n  //     );\n  //   }\n}\n","import { staff } from '../../api/staff';\nimport { BrowserFourdApi } from '.';\nimport { BaseRequest } from 'api';\n\nexport class Staff implements staff.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  selectStaff(request?: staff.SelectStaffRequest): Promise<staff.Staff[]> {\n    return this.fourd.twoWayCall<staff.SelectStaffRequest, staff.Staff[]>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('staff.selectStaff', request, requestId);\n      },\n      (response) => {\n        if (\n          !this.fourd.leapContext?.hostInfo?.hostVersion ||\n          this.fourd.leapContext.hostInfo.hostVersion < '2.4.280.0'\n        ) {\n          //HSDK-122, fix the incorrect property names, can be removed when minimum version is 2.4\n          return response.map((r) => {\n            const staff = { ...r, staffId: r.staffGUID, userId: r.userGUID, branchId: r.branchGUID };\n            delete staff.staffGUID;\n            delete staff.userGUID;\n            delete staff.branchGUID;\n\n            return staff;\n          });\n        }\n        return response;\n      }\n    );\n  }\n\n  // getLists(request: BaseRequest): Promise<staff.Staff[]> {\n  //   return this.fourd.twoWayCall<BaseRequest, staff.Staff[]>(\n  //     request,\n  //     (requestId, request) => {\n  //       this.fourd.call4Dv2('staff.getLists', request, requestId);\n  //     },\n  //     (response) => {\n  //       let responseData;\n  //       try {\n  //         responseData = JSON.parse(response);\n  //       } catch (e) {\n  //         // Unable to parse response.body => response.body is not a stringify object\n  //         responseData = response;\n  //       }\n  //       return responseData;\n  //     }\n  //   );\n  // }\n}\n","import { person } from '../../api/person';\nimport { BrowserFourdApi } from '.';\n\nexport class Person implements person.Api {\n  constructor(private fourd: BrowserFourdApi) {}\n\n  selectPerson(request?: person.SelectPersonRequest): Promise<person.Person[]> {\n    return this.fourd.twoWayCall<person.SelectPersonRequest, person.Person[]>(\n      request,\n      (requestId, request) => {\n        this.fourd.call4Dv2('person.selectPerson', request, requestId);\n      },\n      (response) => {\n        let responseData;\n        try {\n          responseData = JSON.parse(response);\n        } catch (e) {\n          // Unable to parse response.body => response.body is not a stringify object\n          responseData = response;\n        }\n        return responseData;\n      }\n    );\n  }\n\n  openPerson(request: person.OpenPersonRequest): void {\n    this.fourd.call4Dv2('person.openPerson', request);\n  }\n\n  //   getLists(request: BaseRequest): Promise<person.Person[]> {\n  //     return this.fourd.twoWayCall<BaseRequest, person.Person[]>(\n  //       request,\n  //       (requestId, request) => {\n  //         this.fourd.call4Dv2('person.getLists', request, requestId);\n  //       },\n  //       (response) => {\n  //         let responseData;\n  //         try {\n  //           responseData = JSON.parse(response);\n  //         } catch (e) {\n  //           // Unable to parse response.body => response.body is not a stringify object\n  //           responseData = response;\n  //         }\n  //         return responseData;\n  //       }\n  //     );\n  //   }\n}\n","import { BaseApi } from '../base-impl';\nimport { RequestContext } from '../../api';\nimport { app } from '../../api/app';\nimport { calc } from '../../api/calc';\nimport { communication } from '../../api/communication';\nimport { document } from '../../api/document';\nimport { infotrack } from '../../api/infotrack';\nimport { lawconnect } from '../../api/lawconnect';\nimport { matter } from '../../api/matter';\nimport { msteams } from '../../api/msteams';\nimport { register } from '../../api/register';\nimport { system } from '../../api/system';\nimport { accounting } from '../../api/accounting';\nimport { schema } from '../../api/schema';\nimport { card } from '../../api/card';\nimport { staff } from '../../api/staff';\nimport { person } from '../../api/person';\n\nimport { Accounting } from './accounting';\nimport { App } from './app';\nimport { Calc } from './calc';\nimport { Communication } from './communication';\nimport { Document } from './document';\nimport { Infotrack } from './infotrack';\nimport { LawConnect } from './lawconnect';\nimport { Matter } from './matter';\nimport { MsTeams } from './msteams';\nimport { Register } from './register';\nimport { Schema } from './schema';\nimport { System } from './system';\nimport { Card } from './card';\nimport { Staff } from './staff';\nimport { Person } from './person';\n\nimport { Base64 } from 'js-base64';\n\nexport class BrowserFourdApi extends BaseApi {\n  private _accounting: accounting.Api;\n  private _app: app.Api;\n  private _calc: calc.Api;\n  private _communication: communication.Api;\n  private _document: document.Api;\n  private _infotrack: infotrack.Api;\n  private _lawconnect: lawconnect.Api;\n  private _person: person.Api;\n  private _matter: matter.Api;\n  private _msteams: msteams.Api;\n  private _register: register.Api;\n  private _schema: schema.Api;\n  private _system: system.Api;\n  private _card: card.Api;\n  private _staff: staff.Api;\n\n  get accounting(): accounting.Api {\n    return this._accounting;\n  }\n  get app(): app.Api {\n    return this._app;\n  }\n  get calc(): calc.Api {\n    return this._calc;\n  }\n  get card(): card.Api {\n    return this._card;\n  }\n  get communication(): communication.Api {\n    return this._communication;\n  }\n  get document(): document.Api {\n    return this._document;\n  }\n  get infotrack(): infotrack.Api {\n    return this._infotrack;\n  }\n  get lawconnect(): lawconnect.Api {\n    return this._lawconnect;\n  }\n  get matter(): matter.Api {\n    return this._matter;\n  }\n  get msteams(): msteams.Api {\n    return this._msteams;\n  }\n  get person(): person.Api {\n    return this._person;\n  }\n  get register(): register.Api {\n    return this._register;\n  }\n  get schema(): schema.Api {\n    return this._schema;\n  }\n  get system(): system.Api {\n    return this._system;\n  }\n  get staff(): staff.Api {\n    return this._staff;\n  }\n  readonly protocol: string = 'Fourd://';\n\n  constructor(requestContext: RequestContext = undefined) {\n    super(requestContext);\n\n    this._accounting = new Accounting(this);\n    this._app = new App(this);\n    this._calc = new Calc(this);\n    this._communication = new Communication(this);\n    this._document = new Document(this);\n    this._infotrack = new Infotrack(this);\n    this._lawconnect = new LawConnect(this);\n    this._person = new Person(this);\n    this._matter = new Matter(this);\n    this._msteams = new MsTeams(this);\n    this._register = new Register(this);\n    this._schema = new Schema(this);\n    this._system = new System(this);\n    this._card = new Card(this);\n    this._staff = new Staff(this);\n\n    this.setupHostMessageEventHandler();\n  }\n\n  protected retrieveContext(): void {\n    this.call4Dv2('RetrieveLeapAppContext', {}, this.leapContext.hostInfo.appSessionId);\n  }\n\n  to4DJSONString(value: any, encode?: boolean): string {\n    if (encode === undefined) {\n      return 'json=' + Base64.encode(JSON.stringify(value));\n    } else {\n      return JSON.stringify(value);\n    }\n  }\n\n  call4D(request: string): void {\n    if (!window['$4d']) {\n      //this object is lost when the permission acceptance page pops up\n      //so we need to handle it in the old way\n      request = this.protocol + request;\n      window.location.assign(request);\n    } else {\n      request = this.protocol + request;\n      window['$4d'].WebArea_RequestHandler(request);\n    }\n  }\n\n  call4Dv2(command: string, request?: any, requestId?: string): void {\n    if (request === undefined || typeof request === 'object') {\n      // Always append appSessionId to the request sent to Host for validation\n      request = {\n        ...(request || {}),\n        appSessionId: this.leapContext.hostInfo.appSessionId,\n      };\n      if (requestId) {\n        request = { ...request, requestId };\n      }\n    }\n\n    const obj = {\n      command,\n      request,\n      sdkVersion: 2,\n    };\n    this.call4D(this.to4DJSONString(obj));\n  }\n\n  protected hostRelatedSetup(): void {}\n\n  private setupHostMessageEventHandler() {\n    const global = window as any;\n    global.handleHostMessage = (command: string, payload?: string) => super.handleCommand(command, payload);\n  }\n}\n","const whitelistDomains = {\n  dev_au: ['https://dev.leap365.com.au', 'https://dev.leapjd.com.au/'],\n  test_au: [\n    'https://test.leap365.com.au',\n    'https://test-epic1.leap365.com.au',\n    'https://reporting-test.leapaws.com.au',\n    'https://reporting-dev.leapaws.com.au',\n    'https://leapcalc-renderer-au-test.leap.services',\n    'https://test.leapjd.com.au',\n    'https://test.leapjd.co.nz',\n  ],\n\n  live_au: [\n    'https://staging.leap365.com.au',\n    'https://sandbox.leap365.com.au',\n    'https://app.leap365.com.au',\n    'https://reporting.leapaws.com.au',\n    'https://leapcalc-renderer-au-live.leap.services',\n  ],\n\n  liveb_au: ['https://staging.liveb.leap365.com.au', 'https://liveb.leap365.com.au'],\n\n  test_uk: [\n    'https://test.leap365.co.uk',\n    'https://reporting-test.leapaws.co.uk',\n    'https://leapcalc-renderer-uk-test.leap.services',\n    'https://test.leapjd.co.uk',\n  ],\n\n  live_uk: [\n    'https://app.leap365.co.uk',\n    'https://staging.leap365.co.uk',\n    'https://sandbox.leap365.co.uk',\n    'https://reporting.leapaws.co.uk',\n    'https://leapcalc-renderer-uk-live.leap.services',\n  ],\n\n  test_us: [\n    'https://test.leap365.com',\n    'https://reporting-test.leapaws.com',\n    'https://leapcalc-renderer-us-test.leap.services',\n    'https://test.leapjd.com',\n  ],\n\n  live_us: [\n    'https://app.leap365.com',\n    'https://staging.leap365.com',\n    'https://sandbox.leap365.com',\n    'https://reporting.leapaws.com',\n    'https://leapcalc-renderer-us-live.leap.services',\n  ],\n\n  test_ca: [\n    'https://test.leap365.ca',\n    'https://reporting.test.leapaws.ca',\n    'https://renderer.test.ca.leap.services',\n    'https://test.leapjd.ca',\n  ],\n\n  live_ca: [\n    'https://app.leap365.ca',\n    'https://staging.leap365.ca',\n    'https://sandbox.leap365.ca',\n    'https://reporting.leapaws.ca',\n    'https://renderer.ca.leap.services',\n  ],\n};\n\nconst devDomains = [\n  'http://localhost:53504', // local url for reporting\n  'http://localhost:8080', // local url for leap web\n  'http://localhost:9005', // local url for tester app\n];\n\nconst leapHostTestAppDomain = 'https://leaphost.test.leap365.com.au';\n\nconst jd = 'http://my.leapjd';\n\nexport { whitelistDomains, devDomains, leapHostTestAppDomain, jd };\n","import { accounting } from '../../api/accounting';\nimport { IframeWindow } from '.';\n\nexport class Accounting implements accounting.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  createTimeEntry(request: accounting.CreateTimeEntryRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createTimeEntry',\n      args: request,\n    });\n  }\n\n  createFeeEntry(request: accounting.CreateFeeEntryRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createFeeEntry',\n      args: request,\n    });\n  }\n\n  createCostRecovery(request: accounting.CreateCostRecoveryEntryRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createCostRecovery',\n      args: request,\n    });\n  }\n\n  createInvoice(request: accounting.CreateInvoiceRequest): Promise<boolean> {\n    return this.iframe.twoWayCall<accounting.CreateInvoiceRequest, boolean>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'accounting.createInvoice',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n\n  createOfficeReceipt(request: accounting.CreateOfficeReceiptRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createOfficeReceipt',\n      args: request,\n    });\n  }\n\n  createOfficePayment(request: accounting.CreateOfficePaymentRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createOfficePayment',\n      args: request,\n    });\n  }\n\n  createOfficeJournal(request: accounting.CreateOfficeJournalRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createOfficeJournal',\n      args: request,\n    });\n  }\n\n  createTrustReceipt(request: accounting.CreateTrustReceiptRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createTrustReceipt',\n      args: request,\n    });\n  }\n\n  createTrustPayment(request: accounting.CreateTrustPaymentRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createTrustPayment',\n      args: request,\n    });\n  }\n\n  createTrustJournal(request: accounting.CreateTrustJournalRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createTrustJournal',\n      args: request,\n    });\n  }\n\n  createTrustToOffice(request: accounting.CreateTrustToOfficeRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createTrustToOffice',\n      args: request,\n    });\n  }\n  createOfficePaymentRequest(request: accounting.CreateNewOfficePaymentRequestRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createOfficePaymentRequest',\n      args: request,\n    });\n  }\n  createTrustPaymentRequest(request: accounting.CreateNewTrustPaymentRequestRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.createTrustPaymentRequest',\n      args: request,\n    });\n  }\n\n  reloadFinancialSummary(request: accounting.ReloadFinancialSummaryRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadFinancialSummary',\n      args: request,\n    });\n  }\n\n  reloadTimeFeeList(request: accounting.ReloadTimeFeeListRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadTimeFeeList',\n      args: request,\n    });\n  }\n\n  reloadOfficeLedger(request: accounting.ReloadOfficeLedgerRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadOfficeLedger',\n      args: request,\n    });\n  }\n\n  reloadAnticipatedPaymentList(request: accounting.ReloadAnticipatedPaymentListRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadAnticipatedPaymentList',\n      args: request,\n    });\n  }\n\n  reloadCostRecoveryList(request: accounting.ReloadCostRecoveryListRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadCostRecoveryList',\n      args: request,\n    });\n  }\n\n  reloadTrustLedger(request: accounting.ReloadTrustLedgerRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadTrustLedger',\n      args: request,\n    });\n  }\n\n  reloadControlledMoneyList(request: accounting.ReloadControlledMoneyListRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadControlledMoneyList',\n      args: request,\n    });\n  }\n\n  reloadPowerMoneyList(request: accounting.ReloadPowerMoneyListRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadPowerMoneyList',\n      args: request,\n    });\n  }\n\n  reloadTransitMoneyList(request: accounting.ReloadTransitMoneyListRequest): void {\n    this.iframe.postMessage({\n      command: 'accounting.reloadTransitMoneyList',\n      args: request,\n    });\n  }\n\n  openFee(request: accounting.OpenFeeRequest): void {\n    if (request.isAutoTime) request.timed = true;\n\n    this.iframe.postMessage({\n      command: 'accounting.openFee',\n      args: request,\n    });\n  }\n}\n","import { app } from '../../api/app';\nimport { IframeWindow } from '.';\n\nexport class App implements app.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  openApp(request: app.OpenAppRequest): void {\n    this.iframe.postMessage({\n      command: 'app.openApp',\n      args: request,\n    });\n  }\n}\n","import { calc } from '../../api/calc';\nimport { IframeWindow } from './index';\n\nexport class Calc implements calc.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  evaluatePaths(request: calc.EvaluatePathsRequest): Promise<calc.PathResult[]> {\n    return this.iframe.twoWayCall<calc.EvaluatePathsRequest, calc.PathResult[]>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'calc.evaluatePaths',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        let responseData;\n        try {\n          responseData = JSON.parse(response);\n        } catch (e) {\n          // Unable to parse response => response is not a stringify object\n          responseData = response;\n        }\n        return responseData;\n      }\n    );\n  }\n}\n","import { communication } from '../../api/communication';\nimport { IframeWindow } from '.';\n\nexport class Communication implements communication.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  composeEmail(request: communication.CreateEmailRequest): void {\n    this.iframe.postMessage({\n      command: 'communication.composeEmail',\n      args: request,\n    });\n  }\n\n  createAppointment(request: communication.CreateAppointmentRequest): void {\n    this.iframe.postMessage({\n      command: 'communication.createAppointment',\n      args: request,\n    });\n  }\n\n  createTask(request: communication.CreateTaskRequest): void {\n    this.iframe.postMessage({\n      command: 'communication.createTask',\n      args: request,\n    });\n  }\n}\n","import { document } from '../../api/document';\nimport { IframeWindow } from '.';\n\nexport class Document implements document.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  previewDocument(request: document.PreviewDocumentRequest): void {\n    this.iframe.postMessage({\n      command: 'document.previewDocument',\n      args: request,\n    });\n  }\n\n  previewPrecedent(request: document.PreviewPrecedentRequest): void {\n    this.iframe.postMessage({\n      command: 'document.previewPrecedent',\n      args: request,\n    });\n  }\n\n  createDocumentFromContainer(request: document.CreateDocumentFromContainerRequest): void {\n    this.iframe.postMessage({\n      command: 'document.createDocumentFromContainer',\n      args: request,\n    });\n  }\n\n  createDocumentFromPrecedent(request: document.CreateDocumentFromPrecedentRequest): void {\n    this.iframe.postMessage({\n      command: 'document.createDocumentFromPrecedent',\n      args: request,\n    });\n  }\n\n  openDocument(request: document.OpenDocumentRequest): void {\n    this.iframe.postMessage({\n      command: 'document.openDocument',\n      args: request,\n    });\n  }\n\n  reloadDocumentList(request: document.ReloadDocumentListRequest): void {\n    this.iframe.postMessage({\n      command: 'document.reloadDocumentList',\n      args: request,\n    });\n  }\n\n  editPrecedent(request: document.EditPrecedentRequest): void {\n    this.iframe.postMessage({\n      command: 'document.editPrecedent',\n      args: request,\n    });\n  }\n\n  selectPrecedent(request: document.SelectPrecedentRequest): Promise<document.SelectPrecedentResponse> {\n    return this.iframe.twoWayCall<document.SelectPrecedentRequest, document.SelectPrecedentResponse>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'document.selectPrecedent',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => response\n    );\n  }\n}\n","import { infotrack } from '../../api/infotrack';\nimport { IframeWindow } from '.';\n\nexport class Infotrack implements infotrack.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  orderSearch(request: infotrack.CreateSearchRequest): void {\n    this.iframe.postMessage({\n      command: 'infotrack.orderSearch',\n      args: request,\n    });\n  }\n}\n","import { lawconnect } from '../../api/lawconnect';\nimport { IframeWindow } from '.';\n\nexport class LawConnect implements lawconnect.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  shareDocuments(request: lawconnect.ShareDocumentsRequest): void {\n    this.iframe.postMessage({\n      command: 'lawconnect.shareDocuments',\n      args: request,\n    });\n  }\n\n  shareFolder(request: lawconnect.ShareFolderRequest): void {\n    this.iframe.postMessage({\n      command: 'lawconnect.shareFolder',\n      args: request,\n    });\n  }\n\n  shareOfficeStatement(request: lawconnect.ShareOfficeStatementRequest): void {\n    this.iframe.postMessage({\n      command: 'lawconnect.shareOfficeStatement',\n      args: request,\n    });\n  }\n\n  shareTrustStatement(request: lawconnect.ShareTrustStatementRequest): void {\n    this.iframe.postMessage({\n      command: 'lawconnect.shareTrustStatement',\n      args: request,\n    });\n  }\n}\n","import { matter } from '../../api/matter';\nimport { IframeWindow } from '.';\nimport { BaseRequest } from 'api';\n\nexport class Matter implements matter.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  openTable(request: matter.OpenTableRequest): void {\n    this.iframe.postMessage({\n      command: 'matter.openTable',\n      args: request,\n    });\n  }\n\n  openMatter(request: matter.OpenMatterRequest): void {\n    this.iframe.postMessage({\n      command: 'matter.openMatter',\n      args: request,\n    });\n  }\n\n  selectMatter(request?: matter.SelectMatterRequest): Promise<matter.Matter[]> {\n    return this.iframe.twoWayCall<BaseRequest, matter.Matter[]>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'matter.selectMatter',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n\n  // getLists(request: BaseRequest): Promise<matter.MatterResult[]> {\n  //   return this.iframe.twoWayCall<BaseRequest, matter.MatterResult[]>(\n  //     request,\n  //     (requestId, request) => {\n  //       this.iframe.postMessage({\n  //         command: 'matter.getLists',\n  //         args: {\n  //           ...request,\n  //           requestId,\n  //         },\n  //       });\n  //     },\n  //     (response) => {\n  //       let responseData;\n  //       try {\n  //         responseData = JSON.parse(response);\n  //       } catch (e) {\n  //         // Unable to parse response => response is not a stringify object\n  //         responseData = response;\n  //       }\n  //       return responseData;\n  //     }\n  //   );\n  // }\n}\n","import { msteams } from '../../api/msteams';\nimport { IframeWindow } from '.';\n\nexport class MsTeams implements msteams.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  shareDocument(request: msteams.ShareDocumentRequest): void {\n    this.iframe.postMessage({\n      command: 'msteams.shareDocument',\n      args: request,\n    });\n  }\n\n  shareMatter(request: msteams.ShareMatterRequest): void {\n    this.iframe.postMessage({\n      command: 'msteams.shareMatter',\n      args: request,\n    });\n  }\n\n  requestCallback(request: msteams.RequestCallbackRequest): void {\n    this.iframe.postMessage({\n      command: 'msteams.requestCallback',\n      args: request,\n    });\n  }\n}\n","import { card } from '../../api/card';\nimport { IframeWindow } from '.';\nimport { BaseRequest } from 'api';\n\nexport class Card implements card.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  selectCard(request?: card.SelectCardRequest): Promise<card.Card[]> {\n    return this.iframe.twoWayCall<card.SelectCardRequest, card.Card[]>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'card.selectCard',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        let responseData;\n        try {\n          responseData = JSON.parse(response);\n        } catch (e) {\n          // Unable to parse response => response is not a stringify object\n          responseData = response;\n        }\n        return responseData;\n      }\n    );\n  }\n\n  createCard(): Promise<card.CreatedCard> {\n    return this.iframe.twoWayCall<any, card.CreatedCard>(\n      null,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'card.createCard',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        let responseData;\n        try {\n          responseData = JSON.parse(response);\n        } catch (e) {\n          // Unable to parse response => response is not a stringify object\n          responseData = response;\n        }\n        return responseData;\n      }\n    );\n  }\n\n  openCard(request: card.OpenCardRequest): void {\n    this.iframe.postMessage({\n      command: 'card.openCard',\n      args: request,\n    });\n  }\n\n  //   getLists(request: BaseRequest): Promise<card.Card[]> {\n  //     return this.iframe.twoWayCall<BaseRequest, card.Card[]>(\n  //       request,\n  //       (requestId, request) => {\n  //         this.iframe.postMessage({\n  //           command: 'card.getLists',\n  //           args: {\n  //             ...request,\n  //             requestId,\n  //           },\n  //         });\n  //       },\n  //       (response) => {\n  //         let responseData;\n  //         try {\n  //           responseData = JSON.parse(response);\n  //         } catch (e) {\n  //           // Unable to parse response => response is not a stringify object\n  //           responseData = response;\n  //         }\n  //         return responseData;\n  //       }\n  //     );\n  //   }\n}\n","import { staff } from '../../api/staff';\nimport { IframeWindow } from '.';\nimport { BaseRequest } from 'api';\n\nexport class Staff implements staff.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  selectStaff(request?: staff.SelectStaffRequest): Promise<staff.Staff[]> {\n    return this.iframe.twoWayCall<BaseRequest, staff.Staff[]>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'staff.selectStaff',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n\n  //   getLists(request: BaseRequest): Promise<staff.Staff[]> {\n  //     return this.iframe.twoWayCall<BaseRequest, staff.Staff[]>(\n  //       request,\n  //       (requestId, request) => {\n  //         this.iframe.postMessage({\n  //           command: 'staff.getLists',\n  //           args: {\n  //             ...request,\n  //             requestId,\n  //           },\n  //         });\n  //       },\n  //       (response) => {\n  //         let responseData;\n  //         try {\n  //           responseData = JSON.parse(response);\n  //         } catch (e) {\n  //           // Unable to parse response => response is not a stringify object\n  //           responseData = response;\n  //         }\n  //         return responseData;\n  //       }\n  //     );\n  //   }\n}\n","import { register } from '../../api/register';\nimport { IframeWindow } from '.';\n\nexport class Register implements register.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  reloadDocumentRegisterList(request: register.ReloadDocumentRegisterListRequest): void {\n    this.iframe.postMessage({\n      command: 'register.reloadDocumentRegisterList',\n      args: request,\n    });\n  }\n  reloadPowerEstateList(request: register.ReloadPowerEstateListRequest): void {\n    this.iframe.postMessage({\n      command: 'register.reloadPowerEstateList',\n      args: request,\n    });\n  }\n}\n","import { IframeWindow } from '.';\nimport { schema } from '../../api/schema';\n\nexport class Schema implements schema.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  customiseList(request: schema.CustomiseListRequest): Promise<schema.CustomiseListResponse> {\n    return this.iframe.twoWayCall<schema.CustomiseListRequest, schema.CustomiseListResponse>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'schema.customiseList',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n\n  getLists(request: schema.GetListsRequest): Promise<schema.SchemaResponse<schema.SchemaList[]>> {\n    return this.iframe.twoWayCall<schema.GetListsRequest, schema.SchemaResponse<schema.SchemaList[]>>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'schema.getLists',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n}\n","import { system } from '../../api/system';\nimport { BaseRequest } from '../../api';\nimport { IframeWindow } from '.';\n\nexport class System implements system.Api {\n  private _systemInfo: system.SystemInfo;\n\n  constructor(private iframe: IframeWindow) {}\n\n  openTwitter(request: BaseRequest): void {\n    throw new Error('Not supported');\n  }\n\n  close(): void {\n    this.iframe.postMessage({ command: 'system.close' });\n  }\n\n  hide(): void {\n    this.iframe.postMessage({ command: 'system.hide' });\n  }\n\n  wait(request?: system.MessageRequest): void {\n    this.iframe.postMessage({ command: 'system.wait', args: request });\n  }\n\n  resume(): void {\n    this.iframe.postMessage({ command: 'system.resume' });\n  }\n\n  cancelClose(): void {\n    this.iframe.postMessage({ command: 'system.cancelClose' });\n  }\n\n  alert(request: system.MessageRequest): void {\n    this.iframe.postMessage({ command: 'system.alert', args: request });\n  }\n\n  error(request: system.MessageRequest): void {\n    this.iframe.postMessage({ command: 'system.error', args: request });\n  }\n\n  openDialog(request: system.DialogRequest): Promise<boolean> {\n    return this.iframe.twoWayCall<system.DialogRequest, boolean>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'system.openDialog',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        return response;\n      }\n    );\n  }\n\n  openUrl(config: system.BrowserConfig): void {\n    this.iframe.postMessage({ command: 'system.openUrl', args: config });\n  }\n\n  getSystemInfo(): Promise<system.SystemInfo> {\n    if (this._systemInfo) {\n      return Promise.resolve(this._systemInfo);\n    }\n    return this.iframe.twoWayCall<system.SystemInfo, system.SystemInfo>(\n      null,\n      (requestId) => {\n        this.iframe.postMessage({\n          command: 'system.getSystemInfo',\n          args: { requestId },\n        });\n      },\n      (response) => {\n        this._systemInfo = response;\n        return response;\n      }\n    );\n  }\n\n  setWindowTitle(request: system.SetWindowTitleRequest): void {\n    this.iframe.postMessage({ command: 'system.setWindowTitle', args: request });\n  }\n\n  onBeforeClose(handler: () => Promise<boolean>): void {\n    handler().then((shouldCancelClose) => {\n      if (shouldCancelClose) {\n        this.cancelClose();\n      }\n    });\n  }\n\n  send(request: any, hasResponse: boolean = false): Promise<any> {\n    if (!this.iframe.isTrustedApp) {\n      throw new Error('Permission error');\n    }\n\n    if (request === null || request === undefined) {\n      throw new Error('Bad request');\n    }\n\n    const isObject = typeof request === 'object';\n\n    if (isObject && hasResponse) {\n      return this.iframe.twoWayCall<any, any>(\n        request,\n        (requestId, request) => {\n          this.iframe.postMessage({\n            command: 'system.send',\n            args: { ...request, requestId },\n          });\n        },\n        (response) => {\n          return response;\n        }\n      );\n    } else {\n      this.iframe.postMessage({ command: 'system.send', args: request });\n      return Promise.resolve();\n    }\n  }\n\n  finishLoading(): void {\n    this.iframe.postMessage({ command: 'system.finishLoading' });\n  }\n}\n","import { person } from '../../api/person';\nimport { IframeWindow } from '.';\nimport { BaseRequest } from 'api';\n\nexport class Person implements person.Api {\n  constructor(private iframe: IframeWindow) {}\n\n  selectPerson(request?: person.SelectPersonRequest): Promise<person.Person[]> {\n    return this.iframe.twoWayCall<person.SelectPersonRequest, person.Person[]>(\n      request,\n      (requestId, request) => {\n        this.iframe.postMessage({\n          command: 'person.selectPerson',\n          args: {\n            ...request,\n            requestId,\n          },\n        });\n      },\n      (response) => {\n        let responseData;\n        try {\n          responseData = JSON.parse(response);\n        } catch (e) {\n          // Unable to parse response => response is not a stringify object\n          responseData = response;\n        }\n        return responseData;\n      }\n    );\n  }\n\n  openPerson(request: person.OpenPersonRequest): void {\n    this.iframe.postMessage({\n      command: 'person.openPerson',\n      args: request,\n    });\n  }\n\n  //   getLists(request: BaseRequest): Promise<person.Person[]> {\n  //     return this.iframe.twoWayCall<BaseRequest, person.Person[]>(\n  //       request,\n  //       (requestId, request) => {\n  //         this.iframe.postMessage({\n  //           command: 'person.getLists',\n  //           args: {\n  //             ...request,\n  //             requestId,\n  //           },\n  //         });\n  //       },\n  //       (response) => {\n  //         let responseData;\n  //         try {\n  //           responseData = JSON.parse(response);\n  //         } catch (e) {\n  //           // Unable to parse response => response is not a stringify object\n  //           responseData = response;\n  //         }\n  //         return responseData;\n  //       }\n  //     );\n  //   }\n}\n","import { whitelistDomains, devDomains, leapHostTestAppDomain, jd } from './config/whitelistdomain';\nimport { BaseApi } from '../base-impl';\nimport { RequestContext } from '../../api';\nimport { accounting } from '../../api/accounting';\nimport { app } from '../../api/app';\nimport { calc } from '../../api/calc';\nimport { communication } from '../../api/communication';\nimport { document } from '../../api/document';\nimport { infotrack } from '../../api/infotrack';\nimport { lawconnect } from '../../api/lawconnect';\nimport { matter } from '../../api/matter';\nimport { msteams } from '../../api/msteams';\nimport { staff } from '../../api/staff';\nimport { card } from '../../api/card';\nimport { register } from '../../api/register';\nimport { schema } from '../../api/schema';\nimport { system } from '../../api/system';\nimport { person } from '../../api/person';\n\nimport { Accounting } from './accounting';\nimport { App } from './app';\nimport { Calc } from './calc';\nimport { Communication } from './communication';\nimport { Document } from './document';\nimport { Infotrack } from './infotrack';\nimport { LawConnect } from './lawconnect';\nimport { Matter } from './matter';\nimport { MsTeams } from './msteams';\nimport { Card } from './card';\nimport { Staff } from './staff';\nimport { Register } from './register';\nimport { Schema } from './schema';\nimport { System } from './system';\nimport { Person } from './person';\n\nexport class IframeWindow extends BaseApi {\n  private _whiteListedHostDomains: string[];\n\n  private _accounting: accounting.Api;\n  private _app: app.Api;\n  private _calc: calc.Api;\n  private _communication: communication.Api;\n  private _document: document.Api;\n  private _infotrack: infotrack.Api;\n  private _lawconnect: lawconnect.Api;\n  private _matter: matter.Api;\n  private _msteams: msteams.Api;\n  private _card: card.Api;\n  private _staff: staff.Api;\n  private _register: register.Api;\n  private _person: person.Api;\n  private _schema: schema.Api;\n  private _system: system.Api;\n\n  get accounting(): accounting.Api {\n    return this._accounting;\n  }\n  get app(): app.Api {\n    return this._app;\n  }\n  get calc(): calc.Api {\n    return this._calc;\n  }\n  get card(): card.Api {\n    return this._card;\n  }\n  get communication(): communication.Api {\n    return this._communication;\n  }\n  get document(): document.Api {\n    return this._document;\n  }\n  get infotrack(): infotrack.Api {\n    return this._infotrack;\n  }\n  get lawconnect(): lawconnect.Api {\n    return this._lawconnect;\n  }\n  get matter(): matter.Api {\n    return this._matter;\n  }\n  get msteams(): msteams.Api {\n    return this._msteams;\n  }\n  get staff(): staff.Api {\n    return this._staff;\n  }\n  get person(): person.Api {\n    return this._person;\n  }\n  get register(): register.Api {\n    return this._register;\n  }\n  get schema(): schema.Api {\n    return this._schema;\n  }\n  get system(): system.Api {\n    return this._system;\n  }\n\n  private parentWindow: Window;\n\n  constructor(requestContext: RequestContext, newTab: boolean = false) {\n    super(requestContext);\n\n    this._accounting = new Accounting(this);\n    this._app = new App(this);\n    this._calc = new Calc(this);\n    this._card = new Card(this);\n    this._communication = new Communication(this);\n    this._document = new Document(this);\n    this._infotrack = new Infotrack(this);\n    this._lawconnect = new LawConnect(this);\n    this._matter = new Matter(this);\n    this._msteams = new MsTeams(this);\n    this._person = new Person(this);\n    this._register = new Register(this);\n    this._schema = new Schema(this);\n    this._staff = new Staff(this);\n    this._system = new System(this);\n\n    this.parentWindow = newTab ? window.opener : window.parent;\n    this.registerMessageEventListener();\n  }\n\n  protected retrieveContext(): void {\n    this.postMessage({\n      command: 'RetrieveLeapAppContext',\n      args: {\n        requestId: this.leapContext.hostInfo.appSessionId,\n      },\n    });\n  }\n\n  protected hostRelatedSetup(): void {\n    if (this.leapContext.hostInfo.hostType === 'web') {\n      this._whiteListedHostDomains = [\n        ...(whitelistDomains[`${this.leapContext.hostInfo.env}_${this.leapContext.hostInfo.region}`] || []),\n        ...devDomains,\n        leapHostTestAppDomain,\n        jd,\n      ];\n    }\n  }\n\n  postMessage(message: { command: string; args?: any; sdkVersion?: number }): void {\n    // Always append appSessionId to the message args sent to Host for validation\n    message.args = {\n      ...(message.args || {}),\n    };\n\n    if (this.leapContext?.hostInfo?.appSessionId) message.args.appSessionId = this.leapContext.hostInfo?.appSessionId;\n\n    message.sdkVersion = message.sdkVersion ?? 2;\n    this.parentWindow.postMessage(message, '*');\n  }\n\n  private registerMessageEventListener() {\n    window.addEventListener('message', this.receiveMessage.bind(this), false);\n  }\n\n  private receiveMessage(event) {\n    // Origin is not white-listed, ignore message\n    // mobile doesn't have host\n    if (this._whiteListedHostDomains?.length > 0 && !this._whiteListedHostDomains.includes(event.origin)) {\n      return;\n    }\n\n    if (!!event.data.command) {\n      const command: string = event.data.command;\n      if (!!event.data.payload) {\n        super.handleCommand(command, event.data.payload);\n      } else {\n        super.handleCommand(command);\n      }\n    }\n  }\n}\n","import { Api, RequestContext } from '../api';\nimport { BrowserFourdApi } from './desktop';\nimport { IframeWindow } from './web';\nimport { getQueryStringValue } from './util';\n\nexport class LeapHostSdkFactory {\n  static getInstance(): Api {\n    //we only support desktop and IFrame at the moment\n    const requestContext = this.getRequestContext();\n    if (!requestContext) return null;\n    const newTab: boolean = (getQueryStringValue('newTab') || '').toLowerCase() === 'true';\n\n    if (!!window['$4d'] || requestContext.host === 'desktop') return new BrowserFourdApi(requestContext);\n    else return new IframeWindow(requestContext, newTab);\n  }\n\n  private static getRequestContext() {\n    const appSessionId: string = getQueryStringValue('appSessionId');\n    if (!appSessionId) return null;\n\n    const host: string = getQueryStringValue('host') ?? 'desktop';\n    let env: string = getQueryStringValue('env');\n    const region: string = getQueryStringValue('region');\n    const trustedApp: boolean = (getQueryStringValue('trustedApp') || '').toLowerCase() === 'true';\n\n    //backward compatiable with v1 messageBus like \"autest\"\n    if (!!env) {\n      if (env.includes('liveb')) env = 'liveb';\n      else if (env.includes('live')) env = 'live';\n      else if (env.includes('test')) env = 'test';\n      else if (env.includes('dev')) env = 'dev';\n    }\n\n    const requestContext: RequestContext = {\n      appSessionId,\n      host,\n      env,\n      region,\n      trustedApp,\n    };\n\n    return requestContext;\n  }\n}\n\nexport { RequestContext, MatterBasedRequest, LeapContext, HostResponse, BaseRequest, Api } from '../api';\n"],"names":["LeapContext","context","hostInfo","HostInfo","appSessionId","hostType","hostVersion","env","region","config","auth","host","dev","au","test","uk","us","ca","live","getQueryStringValue","key","searchInHash","result","undefined","locationSection","window","location","hash","search","length","keyValues","substring","split","i","decodeToken","token","payload","JSON","parse","atob","e","BaseApi","requestContext","registeredCommands","_leapContext","_isTrustedApp","trustedApp","init","leapAuthClientId","errMsg","system","close","Promise","resolve","reject","registerHostMessageHandler","leapContext","data","deregisterHostMessageHandler","leapContextObj","Object","keys","matterContext","clientId","isTrustedApp","hostRelatedSetup","_userToken","authtoken","authEnv","includes","authHost","AuthAgent","autoLogin","autoLogout","uniqueSession","scopes","autoRefreshToken","then","accessToken","retrieveContext","getRefreshedAccessToken","send","command","getDecodedRefreshedAccessToken","getUserInfo","userInfo","callback","alreadyRegistered","Error","twoWayCall","request","requestFn","responseFn","requestId","uuidv4","hostResponse","isSuccess","error","handleCommand","registeredCommand","params","Accounting","fourd","createTimeEntry","call4Dv2","createFeeEntry","createCostRecovery","createInvoice","response","createOfficeReceipt","createOfficePayment","createOfficeJournal","createTrustReceipt","createTrustPayment","createTrustJournal","createTrustToOffice","createOfficePaymentRequest","createTrustPaymentRequest","reloadFinancialSummary","reloadTimeFeeList","reloadOfficeLedger","reloadAnticipatedPaymentList","reloadCostRecoveryList","reloadTrustLedger","reloadControlledMoneyList","reloadPowerMoneyList","reloadTransitMoneyList","openFee","isAutoTime","timed","App","openApp","Calc","evaluatePaths","calcRequest","method","url","body","status","message","responseData","Communication","composeEmail","createAppointment","createTask","Document","previewDocument","previewPrecedent","createDocumentFromContainer","createDocumentFromPrecedent","openDocument","reloadDocumentList","editPrecedent","selectPrecedent","Infotrack","orderSearch","LawConnect","shareDocuments","shareFolder","shareOfficeStatement","shareTrustStatement","Matter","openTable","order","openMatter","selectMatter","map","r","matter","deleted","matterTypeId","MsTeams","shareDocument","shareMatter","requestCallback","Register","reloadDocumentRegisterList","reloadPowerEstateList","Schema","customiseList","getLists","System","value","String","openTwitter","hide","wait","resume","cancelClose","alert","isString","openDialog","dialogType","openUrl","getSystemInfo","_systemInfo","setWindowTitle","onBeforeClose","handler","shouldCancelClose","hasResponse","isObject","sendLegacy","call4D","to4DJSONString","hasStatus","hasOwnProperty","hasError","hasData","finishLoading","Card","selectCard","createCard","openCard","Staff","selectStaff","staff","staffId","staffGUID","userId","userGUID","branchId","branchGUID","Person","selectPerson","openPerson","BrowserFourdApi","_accounting","_app","_calc","_communication","_document","_infotrack","_lawconnect","_person","_matter","_msteams","_register","_schema","_system","_card","_staff","setupHostMessageEventHandler","encode","Base64","stringify","protocol","assign","WebArea_RequestHandler","obj","sdkVersion","global","handleHostMessage","whitelistDomains","dev_au","test_au","live_au","liveb_au","test_uk","live_uk","test_us","live_us","test_ca","live_ca","devDomains","leapHostTestAppDomain","jd","iframe","postMessage","args","IframeWindow","newTab","parentWindow","opener","parent","registerMessageEventListener","_whiteListedHostDomains","addEventListener","receiveMessage","bind","event","origin","LeapHostSdkFactory","getInstance","getRequestContext","toLowerCase"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAwDaA,WAAW,GACtB,qBAAqBC,OAAoD,EAAWC,QAAkB;EAAjF,YAAO,GAAPD,OAAO;EAAwD,aAAQ,GAARC,QAAQ;AAAa;IAG9FC,QAAQ,GACnB,kBACWC,YAAoB,EACpBC,QAAgB,EAChBC,WAAmB,EACnBC,GAAW,EACXC,MAAc;EAJd,iBAAY,GAAZJ,YAAY;EACZ,aAAQ,GAARC,QAAQ;EACR,gBAAW,GAAXC,WAAW;EACX,QAAG,GAAHC,GAAG;EACH,WAAM,GAANC,MAAM;AACd,CAAC;;ACnEN,IAAIC,MAAM,GAAG;EACXC,IAAI,EAAE;IACJC,IAAI,EAAE;MACJC,GAAG,EAAE;QACHC,EAAE,EAAE;OACL;MACDC,IAAI,EAAE;QACJD,EAAE,EAAE,mCAAmC;QACvCE,EAAE,EAAE,kCAAkC;QACtCC,EAAE,EAAE,gCAAgC;QACpCC,EAAE,EAAE;OACL;MACDC,IAAI,EAAE;QACJL,EAAE,EAAE,8BAA8B;QAClCE,EAAE,EAAE,6BAA6B;QACjCC,EAAE,EAAE,2BAA2B;QAC/BC,EAAE,EAAE;;;;CAIX;;ACpBD;;;;;AAKA,SAAgBE,mBAAmB,CAACC,GAAW,EAAEC;MAAAA;IAAAA,eAAwB,KAAK;;EAC5E,IAAIC,MAAM,GAAGC,SAAS;EACtB,IAAMC,eAAe,GAAGH,YAAY,GAAGI,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAGF,MAAM,CAACC,QAAQ,CAACE,MAAM;EAEpF,IAAIJ,eAAe,IAAIA,eAAe,CAACK,MAAM,GAAG,CAAC,EAAE;IACjD,IAAMC,SAAS,GAAGN,eAAe,CAACO,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC;IACzD,IAAIC,CAAC,GAAG,CAAC;IACT,OAAOX,MAAM,KAAKC,SAAS,IAAIU,CAAC,GAAGH,SAAS,CAACD,MAAM,EAAE;MACnD,IAAIG,KAAK,GAAGF,SAAS,CAACG,CAAC,CAAC,CAACD,KAAK,CAAC,GAAG,CAAC;MACnC,IAAIA,KAAK,CAACH,MAAM,KAAK,CAAC,IAAIG,KAAK,CAAC,CAAC,CAAC,KAAKZ,GAAG,EAAEE,MAAM,GAAGU,KAAK,CAAC,CAAC,CAAC;MAC7DC,CAAC,EAAE;;;EAIP,OAAOX,MAAM;AACf;AAEA,AAIA;;;;;AAKA,SAAgBY,WAAW,CAACC,KAAa;EACvC,IAAI,CAACA,KAAK,EAAE,OAAOZ,SAAS;EAC5B,IAAI;IACF,IAAMa,OAAO,GAAGD,KAAK,CAACH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACnC,OAAOK,IAAI,CAACC,KAAK,CAACC,IAAI,CAACH,OAAO,CAAC,CAAC;GACjC,CAAC,OAAOI,CAAC,EAAE;IACV,OAAOjB,SAAS;;AAEpB;;ICRsBkB,OAAO;EAuB3B,iBAAYC,cAA8B;IACxC,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAE5B,IAAMzC,QAAQ,GAAG,IAAIC,QAAQ,CAC3BuC,cAAc,CAACtC,YAAY,EAC3BsC,cAAc,CAAC/B,IAAI,EACnB,IAAI,EACJ+B,cAAc,CAACnC,GAAG,EAClBmC,cAAc,CAAClC,MAAM,CACtB;IACD,IAAI,CAACoC,YAAY,GAAG,IAAI5C,WAAW,CAACuB,SAAS,EAAErB,QAAQ,CAAC;IACxD,IAAI,CAAC2C,aAAa,GAAG,CAAC,CAACH,cAAc,CAACI,UAAU;;EACjD;EAAA,OAUMC,IAAI,GAAJ,cAAKC,gBAAyB;;;IAEnC,IAAMC,MAAM,GAAG9B,mBAAmB,CAAC,OAAO,CAAC;IAC3C,IAAI8B,MAAM,KAAK,eAAe,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,EAAE;IAEnD,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM;MACjC,KAAI,CAACC,0BAA0B,CAC7B,KAAI,CAACC,WAAW,CAACtD,QAAQ,CAACE,YAAY,EACtC;YAASoD,WAAW,QAAjBC,IAAI;QACL,KAAI,CAACC,4BAA4B,CAAC,KAAI,CAACF,WAAW,CAACtD,QAAQ,CAACE,YAAY,CAAC;QACzE,IAAMuD,cAAc,GAAG;UACrB1D,OAAO,EAAEuD,WAAW,CAACvD,OAAO;UAC5BC,QAAQ,EAAE,KAAI,CAACsD,WAAW,CAACtD;SAC5B;QAED,IAAI,CAACsD,WAAW,CAACvD,OAAO,IAAK2D,MAAM,CAACC,IAAI,CAACL,WAAW,CAACvD,OAAO,CAAC,CAAC4B,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC2B,WAAW,CAACM,aAAc,EAAE;UAC1GH,cAAc,CAAC1D,OAAO,GAAGuD,WAAW,CAACM,aAAa;;QAGpD,IAAIC,QAAQ,GAAGf,gBAAgB;;QAG/B,IAAI,CAAC,CAACQ,WAAW,CAACtD,QAAQ,EAAE;UAC1B,KAAI,CAAC2C,aAAa,GAAGW,WAAW,CAACQ,YAAY;UAE7CL,cAAc,CAACzD,QAAQ,GAAG,IAAIC,QAAQ,CACpC,KAAI,CAACqD,WAAW,CAACtD,QAAQ,CAACE,YAAY,EACtCoD,WAAW,CAACtD,QAAQ,CAACG,QAAQ,EAC7BmD,WAAW,CAACtD,QAAQ,CAACI,WAAW,EAChCkD,WAAW,CAACtD,QAAQ,CAACK,GAAG,EACxBiD,WAAW,CAACtD,QAAQ,CAACM,MAAM,CAC5B;UAED,IAAI,CAAC,KAAI,CAACwD,YAAY,EAAE;;YAEtB,IAAI,CAAC,CAACR,WAAW,CAACO,QAAQ,EAAE;cAC1BA,QAAQ,GAAGP,WAAW,CAACO,QAAQ;aAChC,MAAM;cACL,OAAOT,MAAM,CAAC,6CAA6C,CAAC;;WAE/D,MAAM;;YAEL,KAAI,CAACV,YAAY,GAAG,IAAI5C,WAAW,CAAC2D,cAAc,CAAC1D,OAAO,EAAE0D,cAAc,CAACzD,QAAQ,CAAC;YACpF,KAAI,CAAC+D,gBAAgB,EAAE;YACvB,OAAOZ,OAAO,EAAE;;SAEnB,MAAM;UACL,IAAI,KAAI,CAACW,YAAY,EAAE;;YAErB,KAAI,CAACE,UAAU,GAAGV,WAAW,CAACW,SAAS;YACvC,KAAI,CAACvB,YAAY,GAAG,IAAI5C,WAAW,CAAC2D,cAAc,CAAC1D,OAAO,EAAE0D,cAAc,CAACzD,QAAQ,CAAC;YACpF,KAAI,CAAC+D,gBAAgB,EAAE;YACvB,OAAOZ,OAAO,EAAE;;;QAIpB,KAAI,CAACT,YAAY,GAAG,IAAI5C,WAAW,CAAC2D,cAAc,CAAC1D,OAAO,EAAE0D,cAAc,CAACzD,QAAQ,CAAC;QACpF,KAAI,CAAC+D,gBAAgB,EAAE;QAEvB,IAAMG,OAAO,GAAGT,cAAc,CAACzD,QAAQ,CAACK,GAAG,CAAC8D,QAAQ,CAAC,MAAM,CAAC,GAAG,MAAM,GAAGV,cAAc,CAACzD,QAAQ,CAACK,GAAG;QACnG,IAAM+D,QAAQ,GAAG7D,MAAM,CAACC,IAAI,CAACC,IAAI,CAACyD,OAAO,CAAC,CAACT,cAAc,CAACzD,QAAQ,CAACM,MAAM,CAAC;QAE1E+D,mBAAS,CAACxB,IAAI,CAAC;UACbuB,QAAQ,EAAEA,QAAQ;UAClBP,QAAQ,EAAEA,QAAQ;UAClBS,SAAS,EAAE,IAAI;UACfC,UAAU,EAAE,KAAK;UACjBC,aAAa,EAAE,KAAK;UACpBC,MAAM,EAAE,CAAC,GAAG,CAAC;UACbC,gBAAgB,EAAE;SACnB,CAAC,CAACC,IAAI,CAAC,UAACC,WAAmB;UAC1B,OAAOzB,OAAO,EAAE;SACjB,CAAC;OACH,CACF;MACD,KAAI,CAAC0B,eAAe,EAAE;KACvB,CAAC;GACH;EAAA,OAEYC,uBAAuB;IAAA;mBAC9B,IAAI;MAAR,IAAI,OAAKhB,YAAY,EAAE;QACrB,IAAI,CAAC,CAAC,OAAKR,WAAW,CAACtD,QAAQ,CAACI,WAAW,EAAE;UAAA;;UAE3C,6CAAO,OAAK4C,MAAM,CAAC+B,IAAI,CAAC;YAAEC,OAAO,EAAE;WAA2B,EAAE,IAAI,CAAC,mEAAI,OAAKhB,UAAU;SACzF,MAAM;;;UAGL,uBAAO,OAAKA,UAAU;;;MAG1B,uBAAOK,mBAAS,CAACS,uBAAuB,EAAE;KAC3C;MAAA;;;EAAA,OAEYG,8BAA8B;IAAA;mBACf,IAAI;MAAA,uBAAJ,OAAKH,uBAAuB,EAAE,OACjD9C,WAAW;KACnB;MAAA;;;EAAA,OAEYkD,WAAW;IAAA;MACtB,uBAAOb,mBAAS,CAACc,QAAQ,EAAE;KAC5B;MAAA;;;EAAA,OAKM9B,0BAA0B,GAA1B,oCAA2B2B,OAAe,EAAEI,QAAgC;IACjF,IAAMC,iBAAiB,GAAG,CAAC,CAAC,IAAI,CAAC5C,kBAAkB,CAACuC,OAAO,CAAC;IAE5D,IAAI,CAACK,iBAAiB,EAAE;MACtB,IAAI,CAAC5C,kBAAkB,CAACuC,OAAO,CAAC,GAAGI,QAAQ;KAC5C,MAAM;MACL,MAAM,IAAIE,KAAK,CAAC,4BAA4B,CAAC;;GAEhD;EAAA,OAEM9B,4BAA4B,GAA5B,sCAA6BwB,OAAe;IACjD,OAAO,IAAI,CAACvC,kBAAkB,CAACuC,OAAO,CAAC;;;;;;;;;EAGzC,OAOOO,UAAU,GAAV,oBACLC,OAAU,EACVC,SAAkD,EAClDC,UAAgC;;IAEhC,IAAMC,SAAS,GAAGC,OAAM,EAAE;IAC1B,OAAO,IAAI1C,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM;MACjC,MAAI,CAACC,0BAA0B,CAACsC,SAAS,EAAE,UAACE,YAA0B;QACpE,MAAI,CAACrC,4BAA4B,CAACmC,SAAS,CAAC;QAC5C,IAAIE,YAAY,CAACC,SAAS,EAAE;UAC1B3C,OAAO,CAACuC,UAAU,CAACG,YAAY,CAACtC,IAAI,CAAC,CAAC;SACvC,MAAM;UACLH,MAAM,CAAC,IAAIkC,KAAK,CAACO,YAAY,CAACE,KAAK,CAAC,CAAC;;OAExC,CAAC;MACFN,SAAS,CAACE,SAAS,EAAEH,OAAO,CAAC;KAC9B,CAAC;GACH;EAAA,OAESQ,aAAa,GAAb,uBAAchB,OAAe,EAAE9C,OAAgB;IACvD,IAAM+D,iBAAiB,GAAG,IAAI,CAACxD,kBAAkB,CAACuC,OAAO,CAAC;IAE1D,IAAI,CAAC,CAACiB,iBAAiB,IAAI,CAAC,CAAC/D,OAAO,EAAE;MACpC,IAAMgE,MAAM,GAAG/D,IAAI,CAACC,KAAK,CAACF,OAAO,CAAC;MAClC+D,iBAAiB,CAACC,MAAM,CAAC;KAC1B,MAAM,IAAI,CAAC,CAACD,iBAAiB,EAAE;MAC9BA,iBAAiB,EAAE;KACpB,MAAM;MACL,MAAM,IAAIX,KAAK,CAAC,6BAA6B,CAAC;;GAEjD;EAAA;IAAA;IAAA,KApKD;MACE,OAAO,IAAI,CAAC5C,YAAY;;;IACzB;IAAA,KAED;MACE,OAAO,IAAI,CAACC,aAAa;;;EAC1B;AAAA;;ICtEUwD,UAAU;EACrB,oBAAoBC,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9CC,eAAe,GAAf,yBAAgBb,OAA0C;IACxD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,4BAA4B,EAAEd,OAAO,CAAC;GAC3D;EAAA,OAEDe,cAAc,GAAd,wBAAef,OAAyC;IACtD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,2BAA2B,EAAEd,OAAO,CAAC;GAC1D;EAAA,OAEDgB,kBAAkB,GAAlB,4BAAmBhB,OAAkD;IACnE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,+BAA+B,EAAEd,OAAO,CAAC;GAC9D;EAAA,OAEDiB,aAAa,GAAb,uBAAcjB,OAAwC;;IACpD,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,0BAA0B,EAAEd,OAAO,EAAEG,SAAS,CAAC;KACpE,EACD,UAACe,QAAQ;MACP,OAAO,IAAI,CAAC;KACb,CACF;GACF;EAAA,OAEDC,mBAAmB,GAAnB,6BAAoBnB,OAA8C;IAChE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,gCAAgC,EAAEd,OAAO,CAAC;GAC/D;EAAA,OAEDoB,mBAAmB,GAAnB,6BAAoBpB,OAA8C;IAChE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,gCAAgC,EAAEd,OAAO,CAAC;GAC/D;EAAA,OAEDqB,mBAAmB,GAAnB,6BAAoBrB,OAA8C;IAChE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,gCAAgC,EAAEd,OAAO,CAAC;GAC/D;EAAA,OAEDsB,kBAAkB,GAAlB,4BAAmBtB,OAA6C;IAC9D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,+BAA+B,EAAEd,OAAO,CAAC;GAC9D;EAAA,OAEDuB,kBAAkB,GAAlB,4BAAmBvB,OAA6C;IAC9D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,+BAA+B,EAAEd,OAAO,CAAC;GAC9D;EAAA,OAEDwB,kBAAkB,GAAlB,4BAAmBxB,OAA6C;IAC9D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,+BAA+B,EAAEd,OAAO,CAAC;GAC9D;EAAA,OAEDyB,mBAAmB,GAAnB,6BAAoBzB,OAA8C;IAChE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,gCAAgC,EAAEd,OAAO,CAAC;GAC/D;EAAA,OACD0B,0BAA0B,GAA1B,oCAA2B1B,OAAwD;IACjF,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,uCAAuC,EAAEd,OAAO,CAAC;GACtE;EAAA,OAED2B,yBAAyB,GAAzB,mCAA0B3B,OAAuD;IAC/E,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,sCAAsC,EAAEd,OAAO,CAAC;GACrE;EAAA,OAED4B,sBAAsB,GAAtB,gCAAuB5B,OAAiD;IACtE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,mCAAmC,EAAEd,OAAO,CAAC;GAClE;EAAA,OAED6B,iBAAiB,GAAjB,2BAAkB7B,OAA4C;IAC5D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,8BAA8B,EAAEd,OAAO,CAAC;GAC7D;EAAA,OAED8B,kBAAkB,GAAlB,4BAAmB9B,OAA6C;IAC9D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,+BAA+B,EAAEd,OAAO,CAAC;GAC9D;EAAA,OAED+B,4BAA4B,GAA5B,sCAA6B/B,OAAuD;IAClF,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,yCAAyC,EAAEd,OAAO,CAAC;GACxE;EAAA,OAEDgC,sBAAsB,GAAtB,gCAAuBhC,OAAiD;IACtE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,mCAAmC,EAAEd,OAAO,CAAC;GAClE;EAAA,OAEDiC,iBAAiB,GAAjB,2BAAkBjC,OAA4C;IAC5D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,8BAA8B,EAAEd,OAAO,CAAC;GAC7D;EAAA,OAEDkC,yBAAyB,GAAzB,mCAA0BlC,OAAoD;IAC5E,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,sCAAsC,EAAEd,OAAO,CAAC;GACrE;EAAA,OAEDmC,oBAAoB,GAApB,8BAAqBnC,OAA+C;IAClE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,iCAAiC,EAAEd,OAAO,CAAC;GAChE;EAAA,OAEDoC,sBAAsB,GAAtB,gCAAuBpC,OAAiD;IACtE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,mCAAmC,EAAEd,OAAO,CAAC;GAClE;EAAA,OAEDqC,OAAO,GAAP,iBAAQrC,OAAkC;IACxC,IAAIA,OAAO,CAACsC,UAAU,EAAEtC,OAAO,CAACuC,KAAK,GAAG,IAAI;IAE5C,IAAI,CAAC3B,KAAK,CAACE,QAAQ,CAAC,oBAAoB,EAAEd,OAAO,CAAC;GACnD;EAAA;AAAA;;ICvGUwC,GAAG;EACd,aAAoB5B,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C6B,OAAO,GAAP,iBAAQzC,OAA2B;IACjC,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,aAAa,EAAEd,OAAO,CAAC;GAC5C;EAAA;AAAA;;ICLU0C,IAAI;EACf,cAAoB9B,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C+B,aAAa,GAAb,uBAAc3C,OAAkC;;IAC9C,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,IAAM4C,WAAW,GAAG;QAClBC,MAAM,EAAE,MAAM;QACdC,GAAG,EAAE,qBAAqB;QAC1BC,IAAI,EAAE/C;OACP;MACD,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,oBAAoB,EAAE8B,WAAW,EAAEzC,SAAS,CAAC;KAClE,EACD,UAACe,QAAQ;MACP,IAAIA,QAAQ,CAAC8B,MAAM,IAAI,GAAG,EAAE;QAC1B,MAAM,IAAIlD,KAAK,CAACnD,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC6B,IAAI,CAAC,CAACE,OAAO,CAAC;OACnD,MAAM;QACL,IAAIC,YAAY;QAChB,IAAI;UACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC6B,IAAI,CAAC;SACzC,CAAC,OAAOjG,CAAC,EAAE;;UAEVoG,YAAY,GAAGhC,QAAQ,CAAC6B,IAAI;;QAE9B,OAAOG,YAAY;;KAEtB,CACF;GACF;EAAA;AAAA;;IC7BUC,aAAa;EACxB,uBAAoBvC,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9CwC,YAAY,GAAZ,sBAAapD,OAAyC;IACpD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,4BAA4B,EAAEd,OAAO,CAAC;GAC3D;EAAA,OAEDqD,iBAAiB,GAAjB,2BAAkBrD,OAA+C;IAC/D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,iCAAiC,EAAEd,OAAO,CAAC;GAChE;EAAA,OAEDsD,UAAU,GAAV,oBAAWtD,OAAwC;IACjD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,0BAA0B,EAAEd,OAAO,CAAC;GACzD;EAAA;AAAA;;ICbUuD,QAAQ;EACnB,kBAAoB3C,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C4C,eAAe,GAAf,yBAAgBxD,OAAwC;IACtD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,0BAA0B,EAAEd,OAAO,CAAC;GACzD;EAAA,OAEDyD,gBAAgB,GAAhB,0BAAiBzD,OAAyC;IACxD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,2BAA2B,EAAEd,OAAO,CAAC;GAC1D;EAAA,OAED0D,2BAA2B,GAA3B,qCAA4B1D,OAAoD;IAC9E,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,sCAAsC,EAAEd,OAAO,CAAC;GACrE;EAAA,OAED2D,2BAA2B,GAA3B,qCAA4B3D,OAAoD;IAC9E,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,sCAAsC,EAAEd,OAAO,CAAC;GACrE;EAAA,OAED4D,YAAY,GAAZ,sBAAa5D,OAAqC;IAChD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,uBAAuB,EAAEd,OAAO,CAAC;GACtD;EAAA,OAED6D,kBAAkB,GAAlB,4BAAmB7D,OAA2C;IAC5D,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,6BAA6B,EAAEd,OAAO,CAAC;GAC5D;EAAA,OAED8D,aAAa,GAAb,uBAAc9D,OAAsC;IAClD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,wBAAwB,EAAEd,OAAO,CAAC;GACvD;EAAA,OAED+D,eAAe,GAAf,yBAAgB/D,OAAwC;;IACtD,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,0BAA0B,EAAEd,OAAO,EAAEG,SAAS,CAAC;KACpE,EACD,UAACe,QAAQ;MAAA,OAAKA,QAAQ;MACvB;GACF;EAAA;AAAA;;ICvCU8C,SAAS;EACpB,mBAAoBpD,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9CqD,WAAW,GAAX,qBAAYjE,OAAsC;IAChD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,uBAAuB,EAAEd,OAAO,CAAC;GACtD;EAAA;AAAA;;ICLUkE,UAAU;EACrB,oBAAoBtD,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9CuD,cAAc,GAAd,wBAAenE,OAAyC;IACtD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,2BAA2B,EAAEd,OAAO,CAAC;GAC1D;EAAA,OAEDoE,WAAW,GAAX,qBAAYpE,OAAsC;IAChD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,wBAAwB,EAAEd,OAAO,CAAC;GACvD;EAAA,OAEDqE,oBAAoB,GAApB,8BAAqBrE,OAA+C;IAClE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,iCAAiC,EAAEd,OAAO,CAAC;GAChE;EAAA,OAEDsE,mBAAmB,GAAnB,6BAAoBtE,OAA8C;IAChE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,gCAAgC,EAAEd,OAAO,CAAC;GAC/D;EAAA;AAAA;;IChBUuE,MAAM;EACjB,gBAAoB3D,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C4D,SAAS,GAAT,mBAAUxE,OAAgC;IACxC,IAAIA,OAAO,IAAI,IAAI,EAAE;MACnBA,OAAO,CAACyE,KAAK,GAAG,CAAC;;IAEnB,IAAI,CAAC7D,KAAK,CAACE,QAAQ,CAAC,kBAAkB,EAAEd,OAAO,CAAC;GACjD;EAAA,OAED0E,UAAU,GAAV,oBAAW1E,OAAiC;IAC1C,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,mBAAmB,EAAEd,OAAO,CAAC;GAClD;EAAA,OAED2E,YAAY,GAAZ,sBAAa3E,OAAoC;;IAC/C,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,qBAAqB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAC/D,EACD,UAACe,QAAQ;;MACP,IACE,2BAAC,KAAI,CAACN,KAAK,CAAC9C,WAAW,4EAAtB,sBAAwBtD,QAAQ,mDAAhC,uBAAkCI,WAAW,KAC9C,KAAI,CAACgG,KAAK,CAAC9C,WAAW,CAACtD,QAAQ,CAACI,WAAW,GAAG,WAAW,EACzD;;QAEA,OAAOsG,QAAQ,CAAC0D,GAAG,CAAC,UAACC,CAAC;UACpB,IAAMC,MAAM,gBAAQD,CAAC;YAAEE,OAAO,EAAEF,CAAC,UAAO;YAAEG,YAAY,EAAE;YAAI;UAC5D,OAAOF,MAAM,UAAO;UAEpB,OAAOA,MAAM;SACd,CAAC;;MAGJ,OAAO5D,QAAQ;KAChB,CACF;GACF;EAAA;AAAA;;ICtCU+D,OAAO;EAClB,iBAAoBrE,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9CsE,aAAa,GAAb,uBAAclF,OAAqC;IACjD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,uBAAuB,EAAEd,OAAO,CAAC;GACtD;EAAA,OAEDmF,WAAW,GAAX,qBAAYnF,OAAmC;IAC7C,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,qBAAqB,EAAEd,OAAO,CAAC;GACpD;EAAA,OAEDoF,eAAe,GAAf,yBAAgBpF,OAAuC;IACrD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,yBAAyB,EAAEd,OAAO,CAAC;GACxD;EAAA;AAAA;;ICbUqF,QAAQ;EACnB,kBAAoBzE,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C0E,0BAA0B,GAA1B,oCAA2BtF,OAAmD;IAC5E,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,qCAAqC,EAAEd,OAAO,CAAC;GACpE;EAAA,OACDuF,qBAAqB,GAArB,+BAAsBvF,OAA8C;IAClE,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,gCAAgC,EAAEd,OAAO,CAAC;GAC/D;EAAA;AAAA;;ICRUwF,MAAM;EACjB,gBAAoB5E,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C6E,aAAa,GAAb,uBAAczF,OAAoC;;IAChD,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,sBAAsB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAChE,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA,OAEDwE,QAAQ,GAAR,kBAAS1F,OAA+B;;IACtC,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,MAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,iBAAiB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAC3D,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA;AAAA;;ICxBUyE,MAAM;EAGjB,gBAAoB/E,KAAsB;IAAtB,UAAK,GAALA,KAAK;IA4KjB,aAAQ,GAAG,UAACgF,KAAU;MAC5B,OAAO,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,YAAYC,MAAM;KAC5D;;EA9K6C;EAAA,OAE9CC,WAAW,GAAX,qBAAY9F,OAAoB;IAC9B,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,oBAAoB,EAAEd,OAAO,CAAC;GACnD;EAAA,OAEDvC,KAAK,GAAL;IACE,IAAI,CAACmD,KAAK,CAACE,QAAQ,CAAC,cAAc,CAAC;GACpC;EAAA,OAEDiF,IAAI,GAAJ;IACE,IAAI,CAACnF,KAAK,CAACE,QAAQ,CAAC,aAAa,CAAC;GACnC;EAAA,OAEDkF,IAAI,GAAJ,cAAKhG,OAA+B;IAClC,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,aAAa,EAAEd,OAAO,CAAC;GAC5C;EAAA,OAEDiG,MAAM,GAAN;IACE,IAAI,CAACrF,KAAK,CAACE,QAAQ,CAAC,eAAe,CAAC;GACrC;EAAA,OAEDoF,WAAW,GAAX;IACE,IAAI,CAACtF,KAAK,CAACE,QAAQ,CAAC,oBAAoB,CAAC;GAC1C;EAAA,OAEDqF,KAAK,GAAL,eAAMnG,OAA8B;IAClC,IAAI,CAAC,IAAI,CAACoG,QAAQ,CAACpG,OAAO,CAACiD,OAAO,CAAC,IAAI,CAACjD,OAAO,CAACiD,OAAO,EAAE;MACvD;;IAEF,IAAI,CAACrC,KAAK,CAACE,QAAQ,CAAC,cAAc,EAAEd,OAAO,CAAC;GAC7C;EAAA,OAEDO,KAAK,GAAL,eAAMP,OAA8B;IAClC,IAAI,CAAC,IAAI,CAACoG,QAAQ,CAACpG,OAAO,CAACiD,OAAO,CAAC,IAAI,CAACjD,OAAO,CAACiD,OAAO,EAAE;MACvD;;IAEF,IAAI,CAACrC,KAAK,CAACE,QAAQ,CAAC,cAAc,EAAEd,OAAO,CAAC;GAC7C;EAAA,OAEDqG,UAAU,GAAV,oBAAWrG,OAA6B;;IACtC,IAAI,CAAC,IAAI,CAACoG,QAAQ,CAACpG,OAAO,CAACiD,OAAO,CAAC,IAAI,CAACjD,OAAO,CAACiD,OAAO,EAAE;MACvD,MAAM,IAAInD,KAAK,CAAC,0BAA0B,CAAC;KAC5C,MAAM,IAAI,CAACE,OAAO,CAACsG,UAAU,EAAE;MAC9B,MAAM,IAAIxG,KAAK,CAAC,2BAA2B,CAAC;;IAG9C,OAAO,IAAI,CAACc,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,mBAAmB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAC7D,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA,OAEDqF,OAAO,GAAP,iBAAQxL,MAA4B;IAClCA,MAAM,CAAC,QAAQ,CAAC,GAAG,SAAS;IAC5B,IAAI,CAAC6F,KAAK,CAACE,QAAQ,CAAC,gBAAgB,EAAE/F,MAAM,CAAC;GAC9C;EAAA,OAEDyL,aAAa,GAAb;;IACE,IAAI,IAAI,CAACC,WAAW,EAAE;MACpB,OAAO/I,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC8I,WAAW,CAAC;;IAE1C,OAAO,IAAI,CAAC7F,KAAK,CAACb,UAAU,CAC1B,IAAI,EACJ,UAACI,SAAS,EAAEH,OAAO;MACjB,MAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,sBAAsB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAChE,EACD,UAACe,QAAQ;MACP,MAAI,CAACuF,WAAW,GAAGvF,QAAQ;MAC3B,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA,OAEDwF,cAAc,GAAd,wBAAe1G,OAAqC;IAClD,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,uBAAuB,EAAEd,OAAO,CAAC;GACtD;EAAA,OAED2G,aAAa,GAAb,uBAAcC,OAA+B;;IAC3CA,OAAO,EAAE,CAACzH,IAAI,CAAC,UAAC0H,iBAAiB;MAC/B,IAAIA,iBAAiB,EAAE;QACrB,MAAI,CAACX,WAAW,EAAE;;KAErB,CAAC;GACH;EAAA,OAEK3G,IAAI,iBAACS,OAAY,EAAE8G;QAAAA;MAAAA,cAAuB,KAAK;;IAAA;mBAC9C,IAAI;MAAT,IAAI,CAAC,OAAKlG,KAAK,CAACtC,YAAY,EAAE;QAC5B,MAAM,IAAIwB,KAAK,CAAC,kBAAkB,CAAC;;MAGrC,IAAIE,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAKnE,SAAS,EAAE;QAC7C,MAAM,IAAIiE,KAAK,CAAC,aAAa,CAAC;;MAGhC,IAAMiH,QAAQ,GAAG,OAAO/G,OAAO,KAAK,QAAQ;;MAG5C,IAAI+G,QAAQ,IAAI/G,OAAO,CAAC,SAAS,CAAC,EAAE;QAClC,IAAI8G,WAAW,EAAE;UACf,uBAAO,OAAKlG,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;YACjB,OAAKY,KAAK,CAACE,QAAQ,CAACd,OAAO,CAAC,SAAS,CAAC,EAAEA,OAAO,CAAC,SAAS,CAAC,EAAEG,SAAS,CAAC;WACvE,EACD,UAACe,QAAQ;YACP,OAAOA,QAAQ;WAChB,CACF;SACF,MAAM;UACL,OAAKN,KAAK,CAACE,QAAQ,CAACd,OAAO,CAAC,SAAS,CAAC,EAAEA,OAAO,CAAC,SAAS,CAAC,CAAC;UAC3D,OAAOtC,OAAO,CAACC,OAAO,EAAE;;;;MAK5B,IAAImJ,WAAW,EAAE;QACf,uBAAO,OAAKlG,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;UACjB,OAAKY,KAAK,CAACE,QAAQ,CAAC,aAAa,EAAEd,OAAO,EAAEG,SAAS,CAAC;SACvD,EACD,UAACe,QAAQ;UACP,OAAOA,QAAQ;SAChB,CACF;OACF,MAAM;QACL,OAAKN,KAAK,CAACE,QAAQ,CAAC,aAAa,EAAEd,OAAO,CAAC;QAC3C,OAAOtC,OAAO,CAACC,OAAO,EAAE;;KAE3B;MAAA;;;;EAED,OACQqJ,UAAU,GAAV,oBAAWhH,OAAY;;IAC7B,IAAM+G,QAAQ,GAAG,OAAO/G,OAAO,KAAK,QAAQ;IAC5C,IAAI,CAAC+G,QAAQ,IAAI,CAAC/G,OAAO,CAAC,WAAW,CAAC,EAAE;MACtC,IAAI,CAACY,KAAK,CAACqG,MAAM,CAAC,IAAI,CAACrG,KAAK,CAACsG,cAAc,CAAClH,OAAO,CAAC,CAAC;MACrD,OAAOtC,OAAO,CAACC,OAAO,EAAE;KACzB,MAAM;MACL,OAAO,IAAID,OAAO,CAAM,UAACC,OAAO,EAAEC,MAAM;QACtC,MAAI,CAACgD,KAAK,CAAC/C,0BAA0B,CAACmC,OAAO,CAAC,WAAW,CAAC,EAAE,UAACkB,QAAQ;UACnE,MAAI,CAACN,KAAK,CAAC5C,4BAA4B,CAACgC,OAAO,CAAC,WAAW,CAAC,CAAC;;UAE7D,IAAI,OAAOkB,QAAQ,KAAK,QAAQ,IAAI,CAAC,CAACA,QAAQ,EAAE;YAC9C,IAAMiG,SAAS,GAAGjG,QAAQ,CAACkG,cAAc,CAAC,WAAW,CAAC;YACtD,IAAMC,QAAQ,GAAGnG,QAAQ,CAACkG,cAAc,CAAC,OAAO,CAAC;YACjD,IAAME,OAAO,GAAGpG,QAAQ,CAACkG,cAAc,CAAC,MAAM,CAAC;YAC/C,IAAID,SAAS,KAAKE,QAAQ,IAAIC,OAAO,CAAC,EAAE;cACtC,IAAIpG,QAAQ,CAAC,WAAW,CAAC,EAAE;gBACzBvD,OAAO,CAACuD,QAAQ,CAAC,MAAM,CAAC,CAAC;eAC1B,MAAM;gBACLtD,MAAM,CAAC,IAAIkC,KAAK,CAACoB,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;;;WAGzC,MAAM;YACLvD,OAAO,CAACuD,QAAQ,CAAC;;SAEpB,CAAC;QACF,MAAI,CAACN,KAAK,CAACqG,MAAM,CAAC,MAAI,CAACrG,KAAK,CAACsG,cAAc,CAAClH,OAAO,CAAC,CAAC;OACtD,CAAC;;GAEL;EAAA,OAEDuH,aAAa,GAAb;IACE,IAAI,CAAC3G,KAAK,CAACE,QAAQ,CAAC,sBAAsB,CAAC;GAC5C;EAAA;AAAA;;IC7KU0G,IAAI;EACf,cAAoB5G,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C6G,UAAU,GAAV,oBAAWzH,OAAgC;;IACzC,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,iBAAiB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAC3D,EACD,UAACe,QAAQ;MACP,IAAIgC,YAAY;MAChB,IAAI;QACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC;OACpC,CAAC,OAAOpE,CAAC,EAAE;QACVoG,YAAY,GAAGhC,QAAQ;;MAEzB,OAAOgC,YAAY;KACpB,CACF;GACF;EAAA,OAEDwE,UAAU,GAAV;;IACE,OAAO,IAAI,CAAC9G,KAAK,CAACb,UAAU,CAC1B,IAAI,EACJ,UAACI,SAAS,EAAEH,OAAO;MACjB,MAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,iBAAiB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAC3D,EACD,UAACe,QAAQ;MACP,IAAIgC,YAAY;MAChB,IAAI;QACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC;OACpC,CAAC,OAAOpE,CAAC,EAAE;QACVoG,YAAY,GAAGhC,QAAQ;;MAEzB,OAAOgC,YAAY;KACpB,CACF;GACF;EAAA,OAEDyE,QAAQ,GAAR,kBAAS3H,OAA6B;IACpC,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,eAAe,EAAEd,OAAO,CAAC;GAC9C;EAAA;AAAA;;ICzCU4H,KAAK;EAChB,eAAoBhH,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9CiH,WAAW,GAAX,qBAAY7H,OAAkC;;IAC5C,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,mBAAmB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAC7D,EACD,UAACe,QAAQ;;MACP,IACE,2BAAC,KAAI,CAACN,KAAK,CAAC9C,WAAW,4EAAtB,sBAAwBtD,QAAQ,mDAAhC,uBAAkCI,WAAW,KAC9C,KAAI,CAACgG,KAAK,CAAC9C,WAAW,CAACtD,QAAQ,CAACI,WAAW,GAAG,WAAW,EACzD;;QAEA,OAAOsG,QAAQ,CAAC0D,GAAG,CAAC,UAACC,CAAC;UACpB,IAAMiD,KAAK,gBAAQjD,CAAC;YAAEkD,OAAO,EAAElD,CAAC,CAACmD,SAAS;YAAEC,MAAM,EAAEpD,CAAC,CAACqD,QAAQ;YAAEC,QAAQ,EAAEtD,CAAC,CAACuD;YAAY;UACxF,OAAON,KAAK,CAACE,SAAS;UACtB,OAAOF,KAAK,CAACI,QAAQ;UACrB,OAAOJ,KAAK,CAACM,UAAU;UAEvB,OAAON,KAAK;SACb,CAAC;;MAEJ,OAAO5G,QAAQ;KAChB,CACF;GACF;EAAA;AAAA;;IC5BUmH,MAAM;EACjB,gBAAoBzH,KAAsB;IAAtB,UAAK,GAALA,KAAK;;EAAqB;EAAA,OAE9C0H,YAAY,GAAZ,sBAAatI,OAAoC;;IAC/C,OAAO,IAAI,CAACY,KAAK,CAACb,UAAU,CAC1BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,qBAAqB,EAAEd,OAAO,EAAEG,SAAS,CAAC;KAC/D,EACD,UAACe,QAAQ;MACP,IAAIgC,YAAY;MAChB,IAAI;QACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC;OACpC,CAAC,OAAOpE,CAAC,EAAE;;QAEVoG,YAAY,GAAGhC,QAAQ;;MAEzB,OAAOgC,YAAY;KACpB,CACF;GACF;EAAA,OAEDqF,UAAU,GAAV,oBAAWvI,OAAiC;IAC1C,IAAI,CAACY,KAAK,CAACE,QAAQ,CAAC,mBAAmB,EAAEd,OAAO,CAAC;GAClD;EAAA;AAAA;;ICSUwI,eAAgB;EAAA;EAgE3B,yBAAYxL;;QAAAA;MAAAA,iBAAiCnB,SAAS;;IACpD,4BAAMmB,cAAc,CAAC;IAHd,cAAQ,GAAW,UAAU;IAKpC,MAAKyL,WAAW,GAAG,IAAI9H,UAAU,+BAAM;IACvC,MAAK+H,IAAI,GAAG,IAAIlG,GAAG,+BAAM;IACzB,MAAKmG,KAAK,GAAG,IAAIjG,IAAI,+BAAM;IAC3B,MAAKkG,cAAc,GAAG,IAAIzF,aAAa,+BAAM;IAC7C,MAAK0F,SAAS,GAAG,IAAItF,QAAQ,+BAAM;IACnC,MAAKuF,UAAU,GAAG,IAAI9E,SAAS,+BAAM;IACrC,MAAK+E,WAAW,GAAG,IAAI7E,UAAU,+BAAM;IACvC,MAAK8E,OAAO,GAAG,IAAIX,MAAM,+BAAM;IAC/B,MAAKY,OAAO,GAAG,IAAI1E,MAAM,+BAAM;IAC/B,MAAK2E,QAAQ,GAAG,IAAIjE,OAAO,+BAAM;IACjC,MAAKkE,SAAS,GAAG,IAAI9D,QAAQ,+BAAM;IACnC,MAAK+D,OAAO,GAAG,IAAI5D,MAAM,+BAAM;IAC/B,MAAK6D,OAAO,GAAG,IAAI1D,MAAM,+BAAM;IAC/B,MAAK2D,KAAK,GAAG,IAAI9B,IAAI,+BAAM;IAC3B,MAAK+B,MAAM,GAAG,IAAI3B,KAAK,+BAAM;IAE7B,MAAK4B,4BAA4B,EAAE;IAAC;;EACrC;EAAA,OAESnK,eAAe,GAAf;IACR,IAAI,CAACyB,QAAQ,CAAC,wBAAwB,EAAE,EAAE,EAAE,IAAI,CAAChD,WAAW,CAACtD,QAAQ,CAACE,YAAY,CAAC;GACpF;EAAA,OAEDwM,cAAc,GAAd,wBAAetB,KAAU,EAAE6D,MAAgB;IACzC,IAAIA,MAAM,KAAK5N,SAAS,EAAE;MACxB,OAAO,OAAO,GAAG6N,eAAM,CAACD,MAAM,CAAC9M,IAAI,CAACgN,SAAS,CAAC/D,KAAK,CAAC,CAAC;KACtD,MAAM;MACL,OAAOjJ,IAAI,CAACgN,SAAS,CAAC/D,KAAK,CAAC;;GAE/B;EAAA,OAEDqB,MAAM,GAAN,gBAAOjH,OAAe;IACpB,IAAI,CAACjE,MAAM,CAAC,KAAK,CAAC,EAAE;;;MAGlBiE,OAAO,GAAG,IAAI,CAAC4J,QAAQ,GAAG5J,OAAO;MACjCjE,MAAM,CAACC,QAAQ,CAAC6N,MAAM,CAAC7J,OAAO,CAAC;KAChC,MAAM;MACLA,OAAO,GAAG,IAAI,CAAC4J,QAAQ,GAAG5J,OAAO;MACjCjE,MAAM,CAAC,KAAK,CAAC,CAAC+N,sBAAsB,CAAC9J,OAAO,CAAC;;GAEhD;EAAA,OAEDc,QAAQ,GAAR,kBAAStB,OAAe,EAAEQ,OAAa,EAAEG,SAAkB;IACzD,IAAIH,OAAO,KAAKnE,SAAS,IAAI,OAAOmE,OAAO,KAAK,QAAQ,EAAE;;MAExDA,OAAO,gBACDA,OAAO,IAAI,EAAE;QACjBtF,YAAY,EAAE,IAAI,CAACoD,WAAW,CAACtD,QAAQ,CAACE;QACzC;MACD,IAAIyF,SAAS,EAAE;QACbH,OAAO,gBAAQA,OAAO;UAAEG,SAAS,EAATA;UAAW;;;IAIvC,IAAM4J,GAAG,GAAG;MACVvK,OAAO,EAAPA,OAAO;MACPQ,OAAO,EAAPA,OAAO;MACPgK,UAAU,EAAE;KACb;IACD,IAAI,CAAC/C,MAAM,CAAC,IAAI,CAACC,cAAc,CAAC6C,GAAG,CAAC,CAAC;GACtC;EAAA,OAESxL,gBAAgB,GAAhB,8BAA2B;EAAA,OAE7BiL,4BAA4B,GAA5B;;IACN,IAAMS,MAAM,GAAGlO,MAAa;IAC5BkO,MAAM,CAACC,iBAAiB,GAAG,UAAC1K,OAAe,EAAE9C,OAAgB;MAAA,0BAAW8D,aAAa,cAAChB,OAAO,EAAE9C,OAAO;KAAC;GACxG;EAAA;IAAA;IAAA,KAtHD;MACE,OAAO,IAAI,CAAC+L,WAAW;;;IACxB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,IAAI;;;IACjB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,KAAK;;;IAClB;IAAA,KACD;MACE,OAAO,IAAI,CAACW,KAAK;;;IAClB;IAAA,KACD;MACE,OAAO,IAAI,CAACV,cAAc;;;IAC3B;IAAA,KACD;MACE,OAAO,IAAI,CAACC,SAAS;;;IACtB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,UAAU;;;IACvB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,WAAW;;;IACxB;IAAA,KACD;MACE,OAAO,IAAI,CAACE,OAAO;;;IACpB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,QAAQ;;;IACrB;IAAA,KACD;MACE,OAAO,IAAI,CAACF,OAAO;;;IACpB;IAAA,KACD;MACE,OAAO,IAAI,CAACG,SAAS;;;IACtB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,OAAO;;;IACpB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,OAAO;;;IACpB;IAAA,KACD;MACE,OAAO,IAAI,CAACE,MAAM;;;EACnB;AAAA,EA7DkCxM,OAAO;;ACpC5C,IAAMoN,gBAAgB,GAAG;EACvBC,MAAM,EAAE,CAAC,4BAA4B,EAAE,4BAA4B,CAAC;EACpEC,OAAO,EAAE,CACP,6BAA6B,EAC7B,mCAAmC,EACnC,uCAAuC,EACvC,sCAAsC,EACtC,iDAAiD,EACjD,4BAA4B,EAC5B,2BAA2B,CAC5B;EAEDC,OAAO,EAAE,CACP,gCAAgC,EAChC,gCAAgC,EAChC,4BAA4B,EAC5B,kCAAkC,EAClC,iDAAiD,CAClD;EAEDC,QAAQ,EAAE,CAAC,sCAAsC,EAAE,8BAA8B,CAAC;EAElFC,OAAO,EAAE,CACP,4BAA4B,EAC5B,sCAAsC,EACtC,iDAAiD,EACjD,2BAA2B,CAC5B;EAEDC,OAAO,EAAE,CACP,2BAA2B,EAC3B,+BAA+B,EAC/B,+BAA+B,EAC/B,iCAAiC,EACjC,iDAAiD,CAClD;EAEDC,OAAO,EAAE,CACP,0BAA0B,EAC1B,oCAAoC,EACpC,iDAAiD,EACjD,yBAAyB,CAC1B;EAEDC,OAAO,EAAE,CACP,yBAAyB,EACzB,6BAA6B,EAC7B,6BAA6B,EAC7B,+BAA+B,EAC/B,iDAAiD,CAClD;EAEDC,OAAO,EAAE,CACP,yBAAyB,EACzB,mCAAmC,EACnC,wCAAwC,EACxC,wBAAwB,CACzB;EAEDC,OAAO,EAAE,CACP,wBAAwB,EACxB,4BAA4B,EAC5B,4BAA4B,EAC5B,8BAA8B,EAC9B,mCAAmC;CAEtC;AAED,IAAMC,UAAU,GAAG,CACjB,wBAAwB,EACxB,uBAAuB,EACvB,uBAAuB,CACxB;AAED,IAAMC,qBAAqB,GAAG,sCAAsC;AAEpE,IAAMC,EAAE,GAAG,kBAAkB;;ICzEhBrK,YAAU;EACrB,oBAAoBsK,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CpK,eAAe,GAAf,yBAAgBb,OAA0C;IACxD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,4BAA4B;MACrC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDe,cAAc,GAAd,wBAAef,OAAyC;IACtD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,2BAA2B;MACpC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDgB,kBAAkB,GAAlB,4BAAmBhB,OAAkD;IACnE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,+BAA+B;MACxC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDiB,aAAa,GAAb,uBAAcjB,OAAwC;;IACpD,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,0BAA0B;QACnC2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA,OAEDC,mBAAmB,GAAnB,6BAAoBnB,OAA8C;IAChE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,gCAAgC;MACzC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDoB,mBAAmB,GAAnB,6BAAoBpB,OAA8C;IAChE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,gCAAgC;MACzC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDqB,mBAAmB,GAAnB,6BAAoBrB,OAA8C;IAChE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,gCAAgC;MACzC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDsB,kBAAkB,GAAlB,4BAAmBtB,OAA6C;IAC9D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,+BAA+B;MACxC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDuB,kBAAkB,GAAlB,4BAAmBvB,OAA6C;IAC9D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,+BAA+B;MACxC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDwB,kBAAkB,GAAlB,4BAAmBxB,OAA6C;IAC9D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,+BAA+B;MACxC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDyB,mBAAmB,GAAnB,6BAAoBzB,OAA8C;IAChE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,gCAAgC;MACzC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OACD0B,0BAA0B,GAA1B,oCAA2B1B,OAAwD;IACjF,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,uCAAuC;MAChD2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OACD2B,yBAAyB,GAAzB,mCAA0B3B,OAAuD;IAC/E,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,sCAAsC;MAC/C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED4B,sBAAsB,GAAtB,gCAAuB5B,OAAiD;IACtE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,mCAAmC;MAC5C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED6B,iBAAiB,GAAjB,2BAAkB7B,OAA4C;IAC5D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,8BAA8B;MACvC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED8B,kBAAkB,GAAlB,4BAAmB9B,OAA6C;IAC9D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,+BAA+B;MACxC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED+B,4BAA4B,GAA5B,sCAA6B/B,OAAuD;IAClF,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,yCAAyC;MAClD2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDgC,sBAAsB,GAAtB,gCAAuBhC,OAAiD;IACtE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,mCAAmC;MAC5C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDiC,iBAAiB,GAAjB,2BAAkBjC,OAA4C;IAC5D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,8BAA8B;MACvC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDkC,yBAAyB,GAAzB,mCAA0BlC,OAAoD;IAC5E,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,sCAAsC;MAC/C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDmC,oBAAoB,GAApB,8BAAqBnC,OAA+C;IAClE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,iCAAiC;MAC1C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDoC,sBAAsB,GAAtB,gCAAuBpC,OAAiD;IACtE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,mCAAmC;MAC5C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDqC,OAAO,GAAP,iBAAQrC,OAAkC;IACxC,IAAIA,OAAO,CAACsC,UAAU,EAAEtC,OAAO,CAACuC,KAAK,GAAG,IAAI;IAE5C,IAAI,CAAC0I,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,oBAAoB;MAC7B2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;IC7KUwC,KAAG;EACd,aAAoByI,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CxI,OAAO,GAAP,iBAAQzC,OAA2B;IACjC,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,aAAa;MACtB2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;ICRU0C,MAAI;EACf,cAAoBuI,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CtI,aAAa,GAAb,uBAAc3C,OAAkC;;IAC9C,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,oBAAoB;QAC7B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,IAAIgC,YAAY;MAChB,IAAI;QACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC;OACpC,CAAC,OAAOpE,CAAC,EAAE;;QAEVoG,YAAY,GAAGhC,QAAQ;;MAEzB,OAAOgC,YAAY;KACpB,CACF;GACF;EAAA;AAAA;;IC1BUC,eAAa;EACxB,uBAAoB8H,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5C7H,YAAY,GAAZ,sBAAapD,OAAyC;IACpD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,4BAA4B;MACrC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDqD,iBAAiB,GAAjB,2BAAkBrD,OAA+C;IAC/D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,iCAAiC;MAC1C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDsD,UAAU,GAAV,oBAAWtD,OAAwC;IACjD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,0BAA0B;MACnC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;ICtBUuD,UAAQ;EACnB,kBAAoB0H,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CzH,eAAe,GAAf,yBAAgBxD,OAAwC;IACtD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,0BAA0B;MACnC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDyD,gBAAgB,GAAhB,0BAAiBzD,OAAyC;IACxD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,2BAA2B;MACpC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED0D,2BAA2B,GAA3B,qCAA4B1D,OAAoD;IAC9E,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,sCAAsC;MAC/C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED2D,2BAA2B,GAA3B,qCAA4B3D,OAAoD;IAC9E,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,sCAAsC;MAC/C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED4D,YAAY,GAAZ,sBAAa5D,OAAqC;IAChD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,uBAAuB;MAChC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED6D,kBAAkB,GAAlB,4BAAmB7D,OAA2C;IAC5D,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,6BAA6B;MACtC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED8D,aAAa,GAAb,uBAAc9D,OAAsC;IAClD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,wBAAwB;MACjC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED+D,eAAe,GAAf,yBAAgB/D,OAAwC;;IACtD,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,0BAA0B;QACnC2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MAAA,OAAKA,QAAQ;MACvB;GACF;EAAA;AAAA;;IClEU8C,WAAS;EACpB,mBAAoBiH,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5ChH,WAAW,GAAX,qBAAYjE,OAAsC;IAChD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,uBAAuB;MAChC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;ICRUkE,YAAU;EACrB,oBAAoB+G,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5C9G,cAAc,GAAd,wBAAenE,OAAyC;IACtD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,2BAA2B;MACpC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDoE,WAAW,GAAX,qBAAYpE,OAAsC;IAChD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,wBAAwB;MACjC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDqE,oBAAoB,GAApB,8BAAqBrE,OAA+C;IAClE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,iCAAiC;MAC1C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDsE,mBAAmB,GAAnB,6BAAoBtE,OAA8C;IAChE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,gCAAgC;MACzC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;IC5BUuE,QAAM;EACjB,gBAAoB0G,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CzG,SAAS,GAAT,mBAAUxE,OAAgC;IACxC,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,kBAAkB;MAC3B2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED0E,UAAU,GAAV,oBAAW1E,OAAiC;IAC1C,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,mBAAmB;MAC5B2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAED2E,YAAY,GAAZ,sBAAa3E,OAAoC;;IAC/C,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,qBAAqB;QAC9B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA;AAAA;;IClCU+D,SAAO;EAClB,iBAAoBgG,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5C/F,aAAa,GAAb,uBAAclF,OAAqC;IACjD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,uBAAuB;MAChC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDmF,WAAW,GAAX,qBAAYnF,OAAmC;IAC7C,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,qBAAqB;MAC9B2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OAEDoF,eAAe,GAAf,yBAAgBpF,OAAuC;IACrD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,yBAAyB;MAClC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;ICrBUwH,MAAI;EACf,cAAoByD,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CxD,UAAU,GAAV,oBAAWzH,OAAgC;;IACzC,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,iBAAiB;QAC1B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,IAAIgC,YAAY;MAChB,IAAI;QACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC;OACpC,CAAC,OAAOpE,CAAC,EAAE;;QAEVoG,YAAY,GAAGhC,QAAQ;;MAEzB,OAAOgC,YAAY;KACpB,CACF;GACF;EAAA,OAEDwE,UAAU,GAAV;;IACE,OAAO,IAAI,CAACuD,MAAM,CAAClL,UAAU,CAC3B,IAAI,EACJ,UAACI,SAAS,EAAEH,OAAO;MACjB,MAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,iBAAiB;QAC1B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,IAAIgC,YAAY;MAChB,IAAI;QACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC;OACpC,CAAC,OAAOpE,CAAC,EAAE;;QAEVoG,YAAY,GAAGhC,QAAQ;;MAEzB,OAAOgC,YAAY;KACpB,CACF;GACF;EAAA,OAEDyE,QAAQ,GAAR,kBAAS3H,OAA6B;IACpC,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,eAAe;MACxB2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;IC1DU4H,OAAK;EAChB,eAAoBqD,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CpD,WAAW,GAAX,qBAAY7H,OAAkC;;IAC5C,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,mBAAmB;QAC5B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA;AAAA;;ICpBUmE,UAAQ;EACnB,kBAAoB4F,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5C3F,0BAA0B,GAA1B,oCAA2BtF,OAAmD;IAC5E,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,qCAAqC;MAC9C2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA,OACDuF,qBAAqB,GAArB,+BAAsBvF,OAA8C;IAClE,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,gCAAgC;MACzC2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;ICdUwF,QAAM;EACjB,gBAAoByF,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CxF,aAAa,GAAb,uBAAczF,OAAoC;;IAChD,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,sBAAsB;QAC/B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA,OAEDwE,QAAQ,GAAR,kBAAS1F,OAA+B;;IACtC,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,MAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,iBAAiB;QAC1B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA;AAAA;;ICpCUyE,QAAM;EAGjB,gBAAoBsF,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5CnF,WAAW,GAAX,qBAAY9F,OAAoB;IAC9B,MAAM,IAAIF,KAAK,CAAC,eAAe,CAAC;GACjC;EAAA,OAEDrC,KAAK,GAAL;IACE,IAAI,CAACwN,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE;KAAgB,CAAC;GACrD;EAAA,OAEDuG,IAAI,GAAJ;IACE,IAAI,CAACkF,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE;KAAe,CAAC;GACpD;EAAA,OAEDwG,IAAI,GAAJ,cAAKhG,OAA+B;IAClC,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE,aAAa;MAAE2L,IAAI,EAAEnL;KAAS,CAAC;GACnE;EAAA,OAEDiG,MAAM,GAAN;IACE,IAAI,CAACgF,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE;KAAiB,CAAC;GACtD;EAAA,OAED0G,WAAW,GAAX;IACE,IAAI,CAAC+E,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE;KAAsB,CAAC;GAC3D;EAAA,OAED2G,KAAK,GAAL,eAAMnG,OAA8B;IAClC,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE,cAAc;MAAE2L,IAAI,EAAEnL;KAAS,CAAC;GACpE;EAAA,OAEDO,KAAK,GAAL,eAAMP,OAA8B;IAClC,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE,cAAc;MAAE2L,IAAI,EAAEnL;KAAS,CAAC;GACpE;EAAA,OAEDqG,UAAU,GAAV,oBAAWrG,OAA6B;;IACtC,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,mBAAmB;QAC5B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA,OAEDqF,OAAO,GAAP,iBAAQxL,MAA4B;IAClC,IAAI,CAACkQ,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE,gBAAgB;MAAE2L,IAAI,EAAEpQ;KAAQ,CAAC;GACrE;EAAA,OAEDyL,aAAa,GAAb;;IACE,IAAI,IAAI,CAACC,WAAW,EAAE;MACpB,OAAO/I,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC8I,WAAW,CAAC;;IAE1C,OAAO,IAAI,CAACwE,MAAM,CAAClL,UAAU,CAC3B,IAAI,EACJ,UAACI,SAAS;MACR,MAAI,CAAC8K,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,sBAAsB;QAC/B2L,IAAI,EAAE;UAAEhL,SAAS,EAATA;;OACT,CAAC;KACH,EACD,UAACe,QAAQ;MACP,MAAI,CAACuF,WAAW,GAAGvF,QAAQ;MAC3B,OAAOA,QAAQ;KAChB,CACF;GACF;EAAA,OAEDwF,cAAc,GAAd,wBAAe1G,OAAqC;IAClD,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE,uBAAuB;MAAE2L,IAAI,EAAEnL;KAAS,CAAC;GAC7E;EAAA,OAED2G,aAAa,GAAb,uBAAcC,OAA+B;;IAC3CA,OAAO,EAAE,CAACzH,IAAI,CAAC,UAAC0H,iBAAiB;MAC/B,IAAIA,iBAAiB,EAAE;QACrB,MAAI,CAACX,WAAW,EAAE;;KAErB,CAAC;GACH;EAAA,OAED3G,IAAI,GAAJ,cAAKS,OAAY,EAAE8G;;QAAAA;MAAAA,cAAuB,KAAK;;IAC7C,IAAI,CAAC,IAAI,CAACmE,MAAM,CAAC3M,YAAY,EAAE;MAC7B,MAAM,IAAIwB,KAAK,CAAC,kBAAkB,CAAC;;IAGrC,IAAIE,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAKnE,SAAS,EAAE;MAC7C,MAAM,IAAIiE,KAAK,CAAC,aAAa,CAAC;;IAGhC,IAAMiH,QAAQ,GAAG,OAAO/G,OAAO,KAAK,QAAQ;IAE5C,IAAI+G,QAAQ,IAAID,WAAW,EAAE;MAC3B,OAAO,IAAI,CAACmE,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;QACjB,MAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;UACtB1L,OAAO,EAAE,aAAa;UACtB2L,IAAI,eAAOnL,OAAO;YAAEG,SAAS,EAATA;;SACrB,CAAC;OACH,EACD,UAACe,QAAQ;QACP,OAAOA,QAAQ;OAChB,CACF;KACF,MAAM;MACL,IAAI,CAAC+J,MAAM,CAACC,WAAW,CAAC;QAAE1L,OAAO,EAAE,aAAa;QAAE2L,IAAI,EAAEnL;OAAS,CAAC;MAClE,OAAOtC,OAAO,CAACC,OAAO,EAAE;;GAE3B;EAAA,OAED4J,aAAa,GAAb;IACE,IAAI,CAAC0D,MAAM,CAACC,WAAW,CAAC;MAAE1L,OAAO,EAAE;KAAwB,CAAC;GAC7D;EAAA;AAAA;;IC1HU6I,QAAM;EACjB,gBAAoB4C,MAAoB;IAApB,WAAM,GAANA,MAAM;;EAAkB;EAAA,OAE5C3C,YAAY,GAAZ,sBAAatI,OAAoC;;IAC/C,OAAO,IAAI,CAACiL,MAAM,CAAClL,UAAU,CAC3BC,OAAO,EACP,UAACG,SAAS,EAAEH,OAAO;MACjB,KAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;QACtB1L,OAAO,EAAE,qBAAqB;QAC9B2L,IAAI,eACCnL,OAAO;UACVG,SAAS,EAATA;;OAEH,CAAC;KACH,EACD,UAACe,QAAQ;MACP,IAAIgC,YAAY;MAChB,IAAI;QACFA,YAAY,GAAGvG,IAAI,CAACC,KAAK,CAACsE,QAAQ,CAAC;OACpC,CAAC,OAAOpE,CAAC,EAAE;;QAEVoG,YAAY,GAAGhC,QAAQ;;MAEzB,OAAOgC,YAAY;KACpB,CACF;GACF;EAAA,OAEDqF,UAAU,GAAV,oBAAWvI,OAAiC;IAC1C,IAAI,CAACiL,MAAM,CAACC,WAAW,CAAC;MACtB1L,OAAO,EAAE,mBAAmB;MAC5B2L,IAAI,EAAEnL;KACP,CAAC;GACH;EAAA;AAAA;;ICFUoL,YAAa;EAAA;EAmExB,sBAAYpO,cAA8B,EAAEqO;;QAAAA;MAAAA,SAAkB,KAAK;;IACjE,4BAAMrO,cAAc,CAAC;IAErB,MAAKyL,WAAW,GAAG,IAAI9H,YAAU,+BAAM;IACvC,MAAK+H,IAAI,GAAG,IAAIlG,KAAG,+BAAM;IACzB,MAAKmG,KAAK,GAAG,IAAIjG,MAAI,+BAAM;IAC3B,MAAK4G,KAAK,GAAG,IAAI9B,MAAI,+BAAM;IAC3B,MAAKoB,cAAc,GAAG,IAAIzF,eAAa,+BAAM;IAC7C,MAAK0F,SAAS,GAAG,IAAItF,UAAQ,+BAAM;IACnC,MAAKuF,UAAU,GAAG,IAAI9E,WAAS,+BAAM;IACrC,MAAK+E,WAAW,GAAG,IAAI7E,YAAU,+BAAM;IACvC,MAAK+E,OAAO,GAAG,IAAI1E,QAAM,+BAAM;IAC/B,MAAK2E,QAAQ,GAAG,IAAIjE,SAAO,+BAAM;IACjC,MAAK+D,OAAO,GAAG,IAAIX,QAAM,+BAAM;IAC/B,MAAKc,SAAS,GAAG,IAAI9D,UAAQ,+BAAM;IACnC,MAAK+D,OAAO,GAAG,IAAI5D,QAAM,+BAAM;IAC/B,MAAK+D,MAAM,GAAG,IAAI3B,OAAK,+BAAM;IAC7B,MAAKyB,OAAO,GAAG,IAAI1D,QAAM,+BAAM;IAE/B,MAAK2F,YAAY,GAAGD,MAAM,GAAGtP,MAAM,CAACwP,MAAM,GAAGxP,MAAM,CAACyP,MAAM;IAC1D,MAAKC,4BAA4B,EAAE;IAAC;;EACrC;EAAA,OAESpM,eAAe,GAAf;IACR,IAAI,CAAC6L,WAAW,CAAC;MACf1L,OAAO,EAAE,wBAAwB;MACjC2L,IAAI,EAAE;QACJhL,SAAS,EAAE,IAAI,CAACrC,WAAW,CAACtD,QAAQ,CAACE;;KAExC,CAAC;GACH;EAAA,OAES6D,gBAAgB,GAAhB;IACR,IAAI,IAAI,CAACT,WAAW,CAACtD,QAAQ,CAACG,QAAQ,KAAK,KAAK,EAAE;MAChD,IAAI,CAAC+Q,uBAAuB,aACtBvB,gBAAgB,CAAI,IAAI,CAACrM,WAAW,CAACtD,QAAQ,CAACK,GAAG,SAAI,IAAI,CAACiD,WAAW,CAACtD,QAAQ,CAACM,MAAM,CAAG,IAAI,EAAE,EAC/FgQ,UAAU,GACbC,qBAAqB,EACrBC,EAAE,EACH;;GAEJ;EAAA,OAEDE,WAAW,GAAX,qBAAYjI,OAA6D;;;IAEvEA,OAAO,CAACkI,IAAI,gBACNlI,OAAO,CAACkI,IAAI,IAAI,EAAE,CACvB;IAED,yBAAI,IAAI,CAACrN,WAAW,uEAAhB,kBAAkBtD,QAAQ,kDAA1B,sBAA4BE,YAAY,EAAEuI,OAAO,CAACkI,IAAI,CAACzQ,YAAY,6BAAG,IAAI,CAACoD,WAAW,CAACtD,QAAQ,2DAAzB,uBAA2BE,YAAY;IAEjHuI,OAAO,CAAC+G,UAAU,0BAAG/G,OAAO,CAAC+G,UAAU,qEAAI,CAAC;IAC5C,IAAI,CAACsB,YAAY,CAACJ,WAAW,CAACjI,OAAO,EAAE,GAAG,CAAC;GAC5C;EAAA,OAEOwI,4BAA4B,GAA5B;IACN1P,MAAM,CAAC4P,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC;GAC1E;EAAA,OAEOD,cAAc,GAAd,wBAAeE,KAAK;;;;IAG1B,IAAI,8BAAI,CAACJ,uBAAuB,0DAA5B,sBAA8BvP,MAAM,IAAG,CAAC,IAAI,CAAC,IAAI,CAACuP,uBAAuB,CAAC/M,QAAQ,CAACmN,KAAK,CAACC,MAAM,CAAC,EAAE;MACpG;;IAGF,IAAI,CAAC,CAACD,KAAK,CAAC/N,IAAI,CAACyB,OAAO,EAAE;MACxB,IAAMA,OAAO,GAAWsM,KAAK,CAAC/N,IAAI,CAACyB,OAAO;MAC1C,IAAI,CAAC,CAACsM,KAAK,CAAC/N,IAAI,CAACrB,OAAO,EAAE;QACxB,mBAAM8D,aAAa,YAAChB,OAAO,EAAEsM,KAAK,CAAC/N,IAAI,CAACrB,OAAO;OAChD,MAAM;QACL,mBAAM8D,aAAa,YAAChB,OAAO;;;GAGhC;EAAA;IAAA;IAAA,KA1HD;MACE,OAAO,IAAI,CAACiJ,WAAW;;;IACxB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,IAAI;;;IACjB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,KAAK;;;IAClB;IAAA,KACD;MACE,OAAO,IAAI,CAACW,KAAK;;;IAClB;IAAA,KACD;MACE,OAAO,IAAI,CAACV,cAAc;;;IAC3B;IAAA,KACD;MACE,OAAO,IAAI,CAACC,SAAS;;;IACtB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,UAAU;;;IACvB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,WAAW;;;IACxB;IAAA,KACD;MACE,OAAO,IAAI,CAACE,OAAO;;;IACpB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,QAAQ;;;IACrB;IAAA,KACD;MACE,OAAO,IAAI,CAACK,MAAM;;;IACnB;IAAA,KACD;MACE,OAAO,IAAI,CAACP,OAAO;;;IACpB;IAAA,KACD;MACE,OAAO,IAAI,CAACG,SAAS;;;IACtB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,OAAO;;;IACpB;IAAA,KACD;MACE,OAAO,IAAI,CAACC,OAAO;;;EACpB;AAAA,EA/D+BtM,OAAO;;IC9B5BiP,kBAAkB;EAAA;EAAA,mBACtBC,WAAW,GAAlB;;IAEE,IAAMjP,cAAc,GAAG,IAAI,CAACkP,iBAAiB,EAAE;IAC/C,IAAI,CAAClP,cAAc,EAAE,OAAO,IAAI;IAChC,IAAMqO,MAAM,GAAY,CAAC5P,mBAAmB,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE0Q,WAAW,EAAE,KAAK,MAAM;IAEtF,IAAI,CAAC,CAACpQ,MAAM,CAAC,KAAK,CAAC,IAAIiB,cAAc,CAAC/B,IAAI,KAAK,SAAS,EAAE,OAAO,IAAIuN,eAAe,CAACxL,cAAc,CAAC,CAAC,KAChG,OAAO,IAAIoO,YAAY,CAACpO,cAAc,EAAEqO,MAAM,CAAC;GACrD;EAAA,mBAEca,iBAAiB,GAAxB;;IACN,IAAMxR,YAAY,GAAWe,mBAAmB,CAAC,cAAc,CAAC;IAChE,IAAI,CAACf,YAAY,EAAE,OAAO,IAAI;IAE9B,IAAMO,IAAI,2BAAWQ,mBAAmB,CAAC,MAAM,CAAC,uEAAI,SAAS;IAC7D,IAAIZ,GAAG,GAAWY,mBAAmB,CAAC,KAAK,CAAC;IAC5C,IAAMX,MAAM,GAAWW,mBAAmB,CAAC,QAAQ,CAAC;IACpD,IAAM2B,UAAU,GAAY,CAAC3B,mBAAmB,CAAC,YAAY,CAAC,IAAI,EAAE,EAAE0Q,WAAW,EAAE,KAAK,MAAM;;IAG9F,IAAI,CAAC,CAACtR,GAAG,EAAE;MACT,IAAIA,GAAG,CAAC8D,QAAQ,CAAC,OAAO,CAAC,EAAE9D,GAAG,GAAG,OAAO,CAAC,KACpC,IAAIA,GAAG,CAAC8D,QAAQ,CAAC,MAAM,CAAC,EAAE9D,GAAG,GAAG,MAAM,CAAC,KACvC,IAAIA,GAAG,CAAC8D,QAAQ,CAAC,MAAM,CAAC,EAAE9D,GAAG,GAAG,MAAM,CAAC,KACvC,IAAIA,GAAG,CAAC8D,QAAQ,CAAC,KAAK,CAAC,EAAE9D,GAAG,GAAG,KAAK;;IAG3C,IAAMmC,cAAc,GAAmB;MACrCtC,YAAY,EAAZA,YAAY;MACZO,IAAI,EAAJA,IAAI;MACJJ,GAAG,EAAHA,GAAG;MACHC,MAAM,EAANA,MAAM;MACNsC,UAAU,EAAVA;KACD;IAED,OAAOJ,cAAc;GACtB;EAAA;AAAA;;;;;"}